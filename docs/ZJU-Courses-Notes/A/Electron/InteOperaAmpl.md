# Chap V 集成运算放大器

!!! quote
	普通三极管构成的放大电路放大倍数不易调整, 一种三极管往往只能放大到一种倍数, 并且还容易受到温度等影响. 因此我们设计了一种全新的电路, 将之集成到芯片中, 此即是**集成运算放大器**.

## 集成运算放大器(差动/差分放大电路)的内部结构

---

![](https://pan.xxbyq.net/f/LdESJ/%E6%88%AA%E5%B1%8F2025-11-26%2011.17.08.png)

- 静态分析: 假设两边电路完全对称, 那么就不会因为温度产生偏移电压, 因为我们接的输出是 $u_o=u_{o1}-u_{o2}$, 而 $u_{o1}$ 与 $u_{o2}$ 本身因温度导致的电压漂移 $\Delta u$ 在减法过程中被抵消了.
- 动态分析: 一分为二来看就是两个由三极管构成的放大电路, 显然有放大功能. 为方便集成为芯片分析起见, 我们记 $A_d=\frac{u_o}{u_{i1}-u_{i2}}$. 另一面, 尽管理想情况下两边电路确实可以抵消温漂等带来的影响, 但实际上仍然会因为两个三极管不完全相同等因素导致即使 $u_{i1} = u_{i2}$ 的情况下 $u_0$ 也不为 $0$. 我们记 $A_c=\frac{u_o}{u_{i1}}=\frac{u_o}{u_{i2}}$(在 $u_{i1}=u_{i2}$ 条件下).

将上述电路集成到芯片, 即是集成运算放大器. 为了描述其性能(与理想器件有多接近), 我们定义共模抑制比 $K_{CMR}=\frac{A_d}{A_c}$. 显然, 共模抑制比越大, 其理想性能越强. 集成得到的芯片的其他参数以及标志如下图所示.

![](https://pan.xxbyq.net/f/ZArt0/%E6%88%AA%E5%B1%8F2025-11-26%2011.34.32.png)

## 集成运算放大器的开环特性

---

!!! note
	这里提到的*开环*, 其实就是指没有反馈, 集成运算放大器不会因为自己输出的大小受到影响.

一般而言, 集成运算放大器的 $A_0$ 都非常大, 接近百万级千万级放大倍数, 大部分使用场景下可以理想化为无穷大的放大倍数. 因此, 其特性曲线几乎可以描述为: 在输入电压大于 $0$ 时输出电压达到饱和值(最大电压), 在输入电压小于 $0$ 时输出电压达到负的饱和值(最小电压). 

当然, 实际上在 $0$ 附近有极小的一段线性区, 满足: $u_o=A_0u_i$, 此时集成运算放大器是典型的电压控制电压的元件(并且恰好为线性). 因此, 为了尽可能地感知输入电压 $u_i$, 一般而言 $r_i\rightarrow \infty$; 为了尽可能地将电压输出, 一般而言 $r_o\rightarrow 0$. 在**线性区工作的条件下**, 有以下两个重要特性:

$$
u_+\approx u_-\ \ \ \ i_+\approx i_0\approx 0
$$

换句话说, **在线性区域工作时, 满足虚短和虚断的两大特性**.

## 负反馈条件下工作的集成运算放大器

---

下面是有关负反馈调节中反馈系数计算的相关定义. 注意区分这里的 $A_f$ 和 $A_0$, 前者指的是在一定反馈电路条件下的放大系数. 换言之, 这里的 $A_f$ 和反馈电路相关.

![](https://pan.xxbyq.net/f/kO7CY/%E6%88%AA%E5%B1%8F2025-11-26%2011.59.09.png)

负反馈有四种类型, 分别是电压串联负反馈, 电压并联负反馈, 电流串联负反馈, 电流并联负反馈. 在下图中说明四者的区别方法.

![](https://pan.xxbyq.net/f/Yjms0/d-37.jpg)

为了满足一开始我们提到的要求, 即**不止能稳定放大到某一倍数**, 并且**不会因为外部温度等因素产生较大干扰**, 那么我们必须让闭环控制(即有这一节带有反馈电路的集成运放)达到深度负反馈的情况. 在此情况下, 电路的放大倍数由反馈电路决定, 几乎与集成运放的开环放大倍数无关. 证明如下:

考虑闭环放大倍数与开环放大倍数之间的关系:

$$
\frac{\mathrm d A_f}{\mathrm d A_0}=\frac{\mathrm d (\frac{A_0}{1+FA_0})}{\mathrm d A_0}=\frac{1}{(1+FA_0)^2}=\frac{A_0}{(1+FA_0)^2}\cdot\frac{1}{A_0}=\frac{1}{1+FA_0}\cdot \frac{A_f}{A_0}
$$

将 $\mathrm d A_0$ 乘到右边, 将 $A_f$ 除到左边:

$$
\frac{\mathrm d A_f}{A_f}=\frac{1}{1+FA_0}\cdot\frac{\mathrm d A_0}{A_0}
$$

深度负反馈, 即 $1+FA_0\gg 1$, 此时随着 $A_0$ 变化(即开环放大倍数变化), $A_f$ 几乎不变. 因此, 当闭环控制达到深度负反馈时, 电路的放大倍数由反馈电路决定, 与开环放大倍数无关.

!!! question
	(习题 5.3.2) 设某个放大电路开环时的放大倍数相对变化量 $\frac{\mathrm d A_0}{A_0}$ 为 $20\%$, 若要求闭环时放大倍数相对变化量 $\frac{\mathrm d A_f}{A_f}$ 为 $1\%$, 且已知 $A_f=100$, 求 $A_0$ 和 $F$ 分别应当取多大?
	
	直接联立 $A_f=\frac{A_0}{1+FA_0}$ 和 $\frac{\mathrm d A_f}{A_f}=\frac{1}{1+FA_0}\frac{\mathrm d A_0}{A_0}$ 即可.

另外补充一个"我不证明"的结论(孙晖老师语), 就是:

- 串联反馈使得输入电阻增大, 并联反馈使得输入电阻减小(决定是串联还是并联的关键在于输入端, 所以影响的是输入电阻. 串联之所以叫串联可能也是因为等效于多串了电阻, 并联之所以叫并联可能也是因为等效于多并了电阻吧...)
- 电压反馈使得输出电阻减小, 电流反馈使得输出电阻增大(前者没有在输出端外加电阻, 后者加了)

当然, 按照我们的设想, 输入电阻自然是越大越好, 输出电阻自然是越小越好. 因此, 我们更常用的电路就是**电压串联负反馈电路**. 为了让大家更深刻地理解这一点, 给出一个实例:

![](https://pan.xxbyq.net/f/ZMrI0/%E6%88%AA%E5%B1%8F2025-11-29%2011.06.48.png)

![](https://pan.xxbyq.net/f/k67TY/%E6%88%AA%E5%B1%8F2025-11-29%2010.32.06.png)

答案又臭又长, 计算量十分惊人, 这里简要给出思路:

![](https://pan.xxbyq.net/f/6opHb/d-39.jpg)

最终的计算结果是, 我们发现等效后的输入电阻比原本单一集成运放的输入电阻还要大上几千倍, 输出电阻比原本单一集成运放的输出电阻还要小上几千倍, 放大倍数稳定在 $10.99$, 我们据此知道了电压串联负反馈对单一集成运算放大器性能有着极其优越的正面影响.

## 模拟信号运算中集成运算放大器的应用

---

上面这类分析方法虽然精准, 但是实际操作中相当麻烦. 因此, 我们采用**虚短**, **虚断**的方法来分析这一类电路.

### 同相比例运算电路

![](https://pan.xxbyq.net/f/1xjHe/%E6%88%AA%E5%B1%8F2025-11-29%2011.33.01.png)

以此电路为例分析. 首先虚短, 因此 $u_-\approx u_+$. 进一步, 虚断, 故而 $i_{u_i\rightarrow u_-}\approx 0$, 因此 $u_b=R_b\cdot i_{u_i\rightarrow u_-}\approx 0$, 因此 $u_-\approx u_+\approx u_i$. 还是因为 $i_{u_i\rightarrow u_-}\approx 0$, 根据基尔霍夫方程电流关系式, 显然 $i_f=i_R=\frac{u_--0}{R}=\frac{u_i}{R}$, 因此 $u_o-u_-=i_f\cdot R_f=\frac{R_f}{R}u_i$, 因此 $u_o=u_-+\frac{R_f}{R}u_i=(1+\frac{R_f}{R})u_i$.

即:

$$
u_o=(\frac{R_f}{R}+1)u_i
$$

另外, 为了保证电路整体等效得到的集成运放仍然满足内部的两个三极管电路对称, 因此必须让同相输入端和反相输入端的外部电阻相等. 这里直接令 $u_i=0$, 得到:

$$
R_b=R\ //\ R_f
$$

该种情况下的输入电阻:

$$
r_i=\frac{u_i}{i_i}=\infty
$$

### 反相比例运算电路

![](https://pan.xxbyq.net/f/mmvUX/%E6%88%AA%E5%B1%8F2025-11-29%2012.57.39.png)

与同相比例运算电路的分析思路类似, 这里简单说明. 根据虚短虚断原则, $u_-=0$ (接地), 并且 $i_-=0$, 根据基尔霍夫定律, 显然 $\frac{u_i}{R}=-\frac{u_o}{R_f}$, 因此:

$$
u_o=-\frac{R_f}{R}u_i
$$

平衡电阻 $R_b$ 值与同相比例运算电路的一致, 输入电阻计算:

$$
r_i=\frac{u_i}{i_i}=R
$$
### 加法运算电路

![](https://pan.xxbyq.net/f/veJUy/%E6%88%AA%E5%B1%8F2025-11-29%2013.11.54.png)

分析方法同电压并联负反馈的方式相同. 同样 $u_-=0$, $i_-=0$, 因此: $i_f=\frac{u_{i1}}{R_1}+\frac{u_{i2}}{R_2}$. 因此, $u_o=-R_f(\frac{u_{i1}}{R_1}+\frac{u_{i2}}{R_2})$. 特别地, 当 $R_1=R_2=R$ 时:

$$
u_o=-\frac{R_f}{R}(u_{i1}+u_{i2})
$$

当输入端加了更多输入电压时结果是一致的, 换言之, 那时候:

$$
u_o=-\frac{R_f}{R}\sum_{i=1}^nu_{ii}
$$

### 减法运算电路

![](https://pan.xxbyq.net/f/V4WtO/%E6%88%AA%E5%B1%8F2025-11-29%2013.17.18.png)

同上, 按照虚短虚断, $u_-=u_+$, 且 $i_{+-}=0$. 因此, 对于 $u_{i2}$ 从 $R_2$ 到 $R_3$ 一路, 基尔霍夫方程解得: $U_-=U_+=U_{R_2R_3}=\frac{R_3}{R_2+R_3}u_{i2}$, 因此 $\frac{u_{i1}-u_-}{R_1}=\frac{u_--u_o}{R_f}$, 即:

$$
\frac{R_f}{R_1}(u_{i1}-\frac{R_3}{R_2+R_3}u_{i2})=\frac{R_3}{R_2+R_3}u_{i2}-u_o
$$

最终解得:

$$
u_o=\frac{R_2}{R_2+R_3}u_{i2}(1+\frac{R_f}{R_1})-\frac{R_f}{R_1}u_{i1}=\frac{R_3}{R_2+R_3}\frac{R_1+R_f}{R_1}u_{i2}-\frac{R_f}{R_1}u_{i1}
$$

特别地, 令 $R_3=R_f$, $R_1=R_2=R$, 化简得到:

$$
u_o=\frac{R_f}{R}(u_{i2}-u_{i1})
$$

!!! note
	上面提到的加法和减法运算电路也可以用叠加定理解决, 或者说但凡涉及到多电源输入的都可以使用叠加定理简化分析过程.

### 混合运算电路

上面几种都是最为基础的几种运算电路, 结构简单但是功能强大. 与数字电路中的组合逻辑电路一样, 将多个运算电路进行组合也可以实现许多复杂的计算, 下面举例说明.

#### ex1

分析下面图中 $u_{i1}$, $u_{i2}$, $u_o$ 之间的关系.

![](https://pan.xxbyq.net/f/bqJCM/%E6%88%AA%E5%B1%8F2025-11-29%2013.37.00.png)

- 解法: 利用叠加定理, 分别求 $u_{i1}$ 和 $u_{i2}$ 对 $u_o$ 的作用效果.

先单独分析 $u_{i1}$ 作用效果(即 $u_{i2}=0$). 显然, 所在电路构成同相比例放大电路, 因此 $u_{o1}=(1+\frac{R_1}{R_2})u_{i1}$. 下面又发现, 若以 $u_{o1}$ 作为输入信号, 那么 $u_{o1}-u_o$ 对应的第二级电路构成反相比例放大电路, 因此仅在 $u_{i1}$ 作用下的 $u_{o}=-\frac{R_2}{R_1}(1+\frac{R_1}{R_2})u_{i1}=-(\frac{R_2}{R_1}+1)u_{i1}$

下面再单独分析 $u_{i2}$ 作用效果. 此时因为 $u_-=u_{i1}=0$, 因此 $R_2$ 所在支路无电流, 而 $I_{+-}$ 更没有电流, 因此 $R_1$ 无分压, $u_{o1}=0$, 相当于接地. 此时显然构成同相比例放大电路, 故而仅在 $u_{i2}$ 作用下的 $u_o=(\frac{R_2}{R_1}+1)u_{i2}$.

将二者叠加, 最终计算得到真正的输出电压:

$$
u_o=(\frac{R_2}{R_1}+1)(u_{i2}-u_{i1})
$$

!!! note
	这里补充一点结论, 在单独分析 $u_{i2}$ 作用时, 我们发现了 $u_{o1}=0$. 事实上, 我们直接根据 $u_o=\frac{A_0}{1+FA_0}u_i$ 都能推导出这一点. 换言之, 如果某一运算电路模块输入电压为 $0$, 那么直接把输出端当成接地就行, 后面分析时会方便很多.

#### ex2

分析下面图中 $u_{I1}$, $u_{I2}$, $u_{I3}$ 和 $u_O$ 之间的关系

![](https://pan.xxbyq.net/f/7wqcq/%E6%88%AA%E5%B1%8F2025-11-29%2013.57.03.png)

![](https://pan.xxbyq.net/f/JJ5fR/d-41.jpg)

#### ex3

分析下图中 $u_{I1}$, $u_{I2}$ 和 $u_O$ 之间的关系

![](https://pan.xxbyq.net/f/KKRiW/%E6%88%AA%E5%B1%8F2025-11-29%2014.19.22.png)

![](https://pan.xxbyq.net/f/R0zhW/d-42.jpg)

#### ex4

除了 $u_O$ 都是已知的, 求 $u_O$.

![](https://pan.xxbyq.net/f/aYrf4/%E6%88%AA%E5%B1%8F2025-11-29%2014.33.20.png)

![](https://pan.xxbyq.net/f/5EVU0/d-43.jpg)

#### ex5

分别解算下面两图中的输出电压 $u_O$.

![](https://pan.xxbyq.net/f/z0rtZ/%E6%88%AA%E5%B1%8F2025-11-29%2014.49.48.png)

![](https://pan.xxbyq.net/f/xQacA/d-44.jpg)

