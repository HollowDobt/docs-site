<!DOCTYPE html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Flowers' Fade, Leaves' Birth."><meta name=author content="Hollow Dobt"><link href=https://docs.hollowlib.top/algorithm/DBAA/array/ rel=canonical><link href=../appendix2/ rel=prev><link href=../../cf/stencil/ rel=next><link rel=icon href=../../../_assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.23"><title>Chap I 线性表 - 帆楼的图书馆</title><link rel=stylesheet href=../../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><style>:root{.md-tag.md-tag--learn{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M384%20512H96c-53%200-96-43-96-96V96C0%2043%2043%200%2096%200h304c26.5%200%2048%2021.5%2048%2048v288c0%2020.9-13.4%2038.7-32%2045.3V448c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032zM96%20384c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h256v-64zm32-232c0%2013.3%2010.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24H152c-13.3%200-24%2010.7-24%2024m24%2072c-13.3%200-24%2010.7-24%2024s10.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24z%22/%3E%3C/svg%3E');}}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../_css/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-TCDSJEFYY3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-TCDSJEFYY3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-TCDSJEFYY3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#chap-i class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../.. title=帆楼的图书馆 class="md-header__button md-logo" aria-label=帆楼的图书馆 data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M22.61 18.36L18.36 22.61L13.16 17.41L14.93 15.64L15.93 16.64L18.4 14.16L19.82 15.58L18.36 17L19.42 18L20.84 16.6L22.61 18.36M6.61 10.83L1.39 5.64L5.64 1.39L7.4 3.16L4.93 5.64L6 6.7L8.46 4.22L9.88 5.64L8.46 7.05L9.46 8.05L6.61 10.83M14.06 9L15 9.93L5.92 19H5V18.08L14.06 9M17.67 3C17.42 3 17.16 3.09 16.96 3.29L15.12 5.12L18.87 8.87L20.71 7C21.1 6.61 21.1 6 20.71 5.59L18.37 3.29C18.18 3.1 17.93 3 17.67 3M14.06 6.18L3 17.25V21H6.75L17.81 9.93L14.06 6.18Z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 帆楼的图书馆 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Chap I 线性表 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Follow System" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Follow System" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Dark Mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Dark Mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Light Mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Light Mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=查找> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hollowdobt/docs-site title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"></path></svg> </div> <div class=md-source__repository> hollowdobt/docs-site </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> <svg xmlns=http://www.w3.org/2000/svg height=24px viewbox="0 -960 960 960" width=24px fill=#1f1f1f><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"></path></svg> Home </a> </li> <li class=md-tabs__item> <a href=../../../ZJU-Courses-Notes/ class=md-tabs__link> <svg xmlns=http://www.w3.org/2000/svg height=24px viewbox="0 -960 960 960" width=24px fill=#1f1f1f><path d="M240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h480q33 0 56.5 23.5T800-800v640q0 33-23.5 56.5T720-80H240Zm0-80h480v-640h-80v280l-100-60-100 60v-280H240v640Zm0 0v-640 640Zm200-360 100-60 100 60-100-60-100 60Z"></path></svg> ZJU Courses Notes </a> </li> <li class=md-tabs__item> <a href=../../../ai/ class=md-tabs__link> <svg xmlns=http://www.w3.org/2000/svg height=24px viewbox="0 -960 960 960" width=24px fill=#1f1f1f><path d="M200-80v-160q0-23 12-41.5t32-29.5l196-99v-70l-139 69q-12 6-25 9t-26 3q-31 0-58.5-16T149-461q-14-27-12-57.5t19-56.5l124-185-80-120h240q133 0 226.5 93T760-560v480H200Zm80-80h400v-400q0-100-70-170t-170-70h-90l26 40-153 230q-5 8-5.5 16.5T221-497q5 11 13.5 14.5T251-479q3 0 15-3l254-128v250L280-240v80Zm160-320Z"></path></svg> Ai </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> <svg xmlns=http://www.w3.org/2000/svg height=24px viewbox="0 -960 960 960" width=24px fill=#1f1f1f><path d="M200-160h560v-80H200v80Zm132-160h296l-23-160H355l-23 160ZM120-80v-160q0-33 23.5-56.5T200-320h52l22-160H160v-80h640v80H686l22 160h52q33 0 56.5 23.5T840-240v160H120Zm151-480-71-320q33 25 68 47t77 22q40 0 73.5-20.5T480-880q28 28 61.5 48.5T615-811q42 0 77-22t68-47l-71 320h-82l39-173-7.5 1q-7.5 1-23.5 1-36 0-70.5-11T480-773q-29 20-62.5 31T349-731q-18 0-26.5-1l-8.5-1 39 173h-82Zm209 80Zm0-80Zm0 400Z"></path></svg> Algorithm </a> </li> <li class=md-tabs__item> <a href=../../../programlang/ class=md-tabs__link> <svg xmlns=http://www.w3.org/2000/svg height=24px viewbox="0 -960 960 960" width=24px fill=#1f1f1f><path d="m384-336 56-57-87-87 87-87-56-57-144 144 144 144Zm192 0 144-144-144-144-56 57 87 87-87 87 56 57ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z"></path></svg> Programlang </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=帆楼的图书馆 class="md-nav__button md-logo" aria-label=帆楼的图书馆 data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M22.61 18.36L18.36 22.61L13.16 17.41L14.93 15.64L15.93 16.64L18.4 14.16L19.82 15.58L18.36 17L19.42 18L20.84 16.6L22.61 18.36M6.61 10.83L1.39 5.64L5.64 1.39L7.4 3.16L4.93 5.64L6 6.7L8.46 4.22L9.88 5.64L8.46 7.05L9.46 8.05L6.61 10.83M14.06 9L15 9.93L5.92 19H5V18.08L14.06 9M17.67 3C17.42 3 17.16 3.09 16.96 3.29L15.12 5.12L18.87 8.87L20.71 7C21.1 6.61 21.1 6 20.71 5.59L18.37 3.29C18.18 3.1 17.93 3 17.67 3M14.06 6.18L3 17.25V21H6.75L17.81 9.93L14.06 6.18Z"></path></svg> </a> 帆楼的图书馆 </label> <div class=md-nav__source> <a href=https://github.com/hollowdobt/docs-site title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"></path></svg> </div> <div class=md-source__repository> hollowdobt/docs-site </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg height=24px viewbox="0 -960 960 960" width=24px fill=#1f1f1f><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"></path></svg> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../ZJU-Courses-Notes/ class=md-nav__link> <span class=md-ellipsis> ZJU Courses Notes </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../ai/ class=md-nav__link> <span class=md-ellipsis> Ai </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <svg xmlns=http://www.w3.org/2000/svg height=24px viewbox="0 -960 960 960" width=24px fill=#1f1f1f><path d="M200-160h560v-80H200v80Zm132-160h296l-23-160H355l-23 160ZM120-80v-160q0-33 23.5-56.5T200-320h52l22-160H160v-80h640v80H686l22 160h52q33 0 56.5 23.5T840-240v160H120Zm151-480-71-320q33 25 68 47t77 22q40 0 73.5-20.5T480-880q28 28 61.5 48.5T615-811q42 0 77-22t68-47l-71 320h-82l39-173-7.5 1q-7.5 1-23.5 1-36 0-70.5-11T480-773q-29 20-62.5 31T349-731q-18 0-26.5-1l-8.5-1 39 173h-82Zm209 80Zm0-80Zm0 400Z"></path></svg> <span class=md-ellipsis> Algorithm </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Algorithm </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> DBAA </span> </a> <label class="md-nav__link " for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> DBAA </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../appendix1/ class=md-nav__link> <span class=md-ellipsis> 附录 I 数学基础与算法设计原则 </span> </a> </li> <li class=md-nav__item> <a href=../appendix2/ class=md-nav__link> <span class=md-ellipsis> 附录 II 算法分析与设计实例 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Chap I 线性表 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Chap I 线性表 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-contiguous-list class=md-nav__link> <span class=md-ellipsis> 1. 顺序表(Contiguous List) </span> </a> </li> <li class=md-nav__item> <a href=#2-linked-list class=md-nav__link> <span class=md-ellipsis> 2. 链表(Linked List) </span> </a> <nav class=md-nav aria-label="2. 链表(Linked List)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> <span class=md-ellipsis> 2.1 基本结构: 节点定义 &amp; 基本操作函数 </span> </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> <span class=md-ellipsis> 2.2 增删查 </span> </a> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> <span class=md-ellipsis> 2.3 链表的应用 </span> </a> <nav class=md-nav aria-label="2.3 链表的应用"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#231 class=md-nav__link> <span class=md-ellipsis> 2.3.1 基数排序 </span> </a> </li> <li class=md-nav__item> <a href=#232 class=md-nav__link> <span class=md-ellipsis> 2.3.2 多项式乘法 </span> </a> </li> <li class=md-nav__item> <a href=#233 class=md-nav__link> <span class=md-ellipsis> 2.3.3 多重表问题 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-stack class=md-nav__link> <span class=md-ellipsis> 3. 栈(Stack) </span> </a> <nav class=md-nav aria-label="3. 栈(Stack)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31 class=md-nav__link> <span class=md-ellipsis> 3.1 栈的实现 </span> </a> </li> <li class=md-nav__item> <a href=#32 class=md-nav__link> <span class=md-ellipsis> 3.2 栈的应用 </span> </a> <nav class=md-nav aria-label="3.2 栈的应用"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#321 class=md-nav__link> <span class=md-ellipsis> 3.2.1 符号平衡(符号语法检查) </span> </a> </li> <li class=md-nav__item> <a href=#322 class=md-nav__link> <span class=md-ellipsis> 3.2.2 从中缀表达式到后缀表达式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../cf/stencil/ class=md-nav__link> <span class=md-ellipsis> Cf </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../programlang/ class=md-nav__link> <span class=md-ellipsis> Programlang </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-contiguous-list class=md-nav__link> <span class=md-ellipsis> 1. 顺序表(Contiguous List) </span> </a> </li> <li class=md-nav__item> <a href=#2-linked-list class=md-nav__link> <span class=md-ellipsis> 2. 链表(Linked List) </span> </a> <nav class=md-nav aria-label="2. 链表(Linked List)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> <span class=md-ellipsis> 2.1 基本结构: 节点定义 &amp; 基本操作函数 </span> </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> <span class=md-ellipsis> 2.2 增删查 </span> </a> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> <span class=md-ellipsis> 2.3 链表的应用 </span> </a> <nav class=md-nav aria-label="2.3 链表的应用"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#231 class=md-nav__link> <span class=md-ellipsis> 2.3.1 基数排序 </span> </a> </li> <li class=md-nav__item> <a href=#232 class=md-nav__link> <span class=md-ellipsis> 2.3.2 多项式乘法 </span> </a> </li> <li class=md-nav__item> <a href=#233 class=md-nav__link> <span class=md-ellipsis> 2.3.3 多重表问题 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-stack class=md-nav__link> <span class=md-ellipsis> 3. 栈(Stack) </span> </a> <nav class=md-nav aria-label="3. 栈(Stack)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31 class=md-nav__link> <span class=md-ellipsis> 3.1 栈的实现 </span> </a> </li> <li class=md-nav__item> <a href=#32 class=md-nav__link> <span class=md-ellipsis> 3.2 栈的应用 </span> </a> <nav class=md-nav aria-label="3.2 栈的应用"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#321 class=md-nav__link> <span class=md-ellipsis> 3.2.1 符号平衡(符号语法检查) </span> </a> </li> <li class=md-nav__item> <a href=#322 class=md-nav__link> <span class=md-ellipsis> 3.2.2 从中缀表达式到后缀表达式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/hollowdobt/docs-site/edit/main/docs/algorithm/DBAA/array.md title=编辑此页 class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <a href=https://github.com/hollowdobt/docs-site/raw/main/docs/algorithm/DBAA/array.md title=查看本页的源代码 class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg> </a> <h1 id=chap-i>Chap I 线性表<a class=headerlink href=#chap-i title="Permanent link">§</a></h1> <div class="admonition abstract"> <p class=admonition-title>Abstract</p> <p>本文主要内容是线性表的概念与实现. 常见的线性表分为连续数组(顺序表), 链表, 栈, 队列.</p> </div> <h2 id=1-contiguous-list>1. 顺序表(Contiguous&nbsp;List)<a class=headerlink href=#1-contiguous-list title="Permanent link">§</a></h2> <hr> <p>这是相当常见的一种线性表, 也是最常用的线性表. 一般我们称这种在内存上连续的表为<strong>顺序表</strong>, <code>C++</code> 中即为 <code>vector</code> 或者一般数组. 这类数据结构相当简单为大家所熟悉, 此处不再过多赘述.</p> <h2 id=2-linked-list>2. 链表(Linked List)<a class=headerlink href=#2-linked-list title="Permanent link">§</a></h2> <hr> <p>下图是单向链表, 双向链表和环表的示意图(设计头和尾根据实际情况进行. 一般而言仅仅使用头即可, 无需尾浪费内存空间).</p> <pre class=mermaid><code>erDiagram
    Node_0 ||--|{ Node_1 : NEXT
    Node_1 ||--|{ Node_2 : NEXT
    Node_2 ||--|{ Node_3 : NEXT

    Node_0 {
        ValueType NULL
        pointer NEXTto1
    }
    Node_1 {
        ValueType x1
        pointer NEXTto2
    }
    Node_2 {
        ValueType x2
        pointer NEXTto3
    }
    Node_3 {
        ValueType NULL
        pointer nullptr
    }

    DNode_0 ||--|{ DNode_1 : NEXT
    DNode_1 ||--|{ DNode_2 : NEXT
    DNode_2 ||--|{ DNode_3 : NEXT
    DNode_1 ||--|{ DNode_0 : NEXT
    DNode_2 ||--|{ DNode_1 : NEXT
    DNode_3 ||--|{ DNode_2 : NEXT

    DNode_0 {
        ValueType NULL
        pointer_next NEXTto1
        pointer_prev nullptr
    }
    DNode_1 {
        ValueType x1
        pointer_next NEXTto2
        pointer_prev NEXTto0
    }
    DNode_2 {
        ValueType x2
        pointer_next NEXTto3
        pointer_prev NEXTto1
    }
    DNode_3 {
        ValueType NULL
        pointer_next nullptr
        pointer_prev NEXTto2
    }

    RNode_0 ||--|{ RNode_1 : NEXT
    RNode_1 ||--|{ RNode_2 : NEXT
    RNode_2 ||--|{ RNode_3 : NEXT
    RNode_3 ||--|{ RNode_1 : NEXT

    RNode_0 {
        ValueType NULL
        pointer NEXTto1
    }
    RNode_1 {
        ValueType x1
        pointer NEXTto2
    }
    RNode_2 {
        ValueType x2
        pointer NEXTto3
    }
    RNode_3 {
        ValueType NULL
        pointer NEXTto1
    }</code></pre> <ul> <li>单向链表 ADT<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup></li> </ul> <table> <thead> <tr> <th>函数名</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>size</td> <td>返回链表中的元素数量(即节点数量)</td> </tr> <tr> <td>is_empty</td> <td>返回链表是否为空的布尔值</td> </tr> <tr> <td>next</td> <td>返回当前节点指针对应的下一个节点指针</td> </tr> <tr> <td>get_front</td> <td>返回链表首个有有效 <code>val</code> 值节点指针对应的 <code>val</code> 值</td> </tr> <tr> <td>get</td> <td>返回给定的节点指针或者下标处对应的节点的 <code>val</code> 值</td> </tr> <tr> <td>change</td> <td>修改给定的节点指针或者下标处对应的节点的 <code>val</code> 值为用户输入的值, 返回修改后的值</td> </tr> <tr> <td>push_front</td> <td>在链表的头部插入新元素, 返回空值</td> </tr> <tr> <td>insert</td> <td>将给定的节点指针或者下标处对应的节点的 <code>next</code> 指针记为旧指针, 将 <code>next</code> 指向输入的新节点, 并让新节点的 <code>next</code> 指针改为旧指针, 返回空值.</td> </tr> <tr> <td>remove</td> <td>移除指定节点(同堂根据节点指针或者下标)的后继节点, 返回空值.</td> </tr> <tr> <td>clear</td> <td>清空链表, 返回空值.</td> </tr> </tbody> </table> <h3 id=21>2.1 基本结构: 节点定义 &amp; 基本操作函数<a class=headerlink href=#21 title="Permanent link">§</a></h3> <p>首先定义基本的节点.</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1> 1</a></span>
<span class=normal><a href=#__codelineno-0-2> 2</a></span>
<span class=normal><a href=#__codelineno-0-3> 3</a></span>
<span class=normal><a href=#__codelineno-0-4> 4</a></span>
<span class=normal><a href=#__codelineno-0-5> 5</a></span>
<span class=normal><a href=#__codelineno-0-6> 6</a></span>
<span class=normal><a href=#__codelineno-0-7> 7</a></span>
<span class=normal><a href=#__codelineno-0-8> 8</a></span>
<span class=normal><a href=#__codelineno-0-9> 9</a></span>
<span class=normal><a href=#__codelineno-0-10>10</a></span>
<span class=normal><a href=#__codelineno-0-11>11</a></span>
<span class=normal><a href=#__codelineno-0-12>12</a></span>
<span class=normal><a href=#__codelineno-0-13>13</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
<a id=__codelineno-0-2 name=__codelineno-0-2></a><span class=k>class</span><span class=w> </span><span class=nc>LinkedList</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=w> </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>Node</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>     </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-0-6 name=__codelineno-0-6></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=n>_value</span><span class=p>;</span>
<a id=__codelineno-0-7 name=__codelineno-0-7></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>_next</span><span class=p>;</span>
<a id=__codelineno-0-8 name=__codelineno-0-8></a>
<a id=__codelineno-0-9 name=__codelineno-0-9></a><span class=w>     </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-0-10 name=__codelineno-0-10></a><span class=w>        </span><span class=n>Node</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-0-11 name=__codelineno-0-11></a><span class=w>        </span><span class=n>Node</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_value</span><span class=p>(</span><span class=n>value</span><span class=p>),</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-0-12 name=__codelineno-0-12></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=p>};</span>
</code></pre></div></td></tr></tbody></table></div> <p>接下来添加访问器函数, 获取节点的 <code>_value</code> 值与 <code>_next</code> 指针.</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1> 1</a></span>
<span class=normal><a href=#__codelineno-1-2> 2</a></span>
<span class=normal><a href=#__codelineno-1-3> 3</a></span>
<span class=normal><a href=#__codelineno-1-4> 4</a></span>
<span class=normal><a href=#__codelineno-1-5> 5</a></span>
<span class=normal><a href=#__codelineno-1-6> 6</a></span>
<span class=normal><a href=#__codelineno-1-7> 7</a></span>
<span class=normal><a href=#__codelineno-1-8> 8</a></span>
<span class=normal><a href=#__codelineno-1-9> 9</a></span>
<span class=normal><a href=#__codelineno-1-10>10</a></span>
<span class=normal><a href=#__codelineno-1-11>11</a></span>
<span class=normal><a href=#__codelineno-1-12>12</a></span>
<span class=normal><a href=#__codelineno-1-13>13</a></span>
<span class=normal><a href=#__codelineno-1-14>14</a></span>
<span class=normal><a href=#__codelineno-1-15>15</a></span>
<span class=normal><a href=#__codelineno-1-16>16</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
<a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=k>class</span><span class=w> </span><span class=nc>LinkedList</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=w> </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-1-4 name=__codelineno-1-4></a><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>Node</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>     </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=n>_value</span><span class=p>;</span>
<a id=__codelineno-1-7 name=__codelineno-1-7></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>_next</span><span class=p>;</span>
<a id=__codelineno-1-8 name=__codelineno-1-8></a>
<a id=__codelineno-1-9 name=__codelineno-1-9></a><span class=w>     </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-1-10 name=__codelineno-1-10></a><span class=w>        </span><span class=n>Node</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-1-11 name=__codelineno-1-11></a><span class=w>        </span><span class=n>Node</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_value</span><span class=p>(</span><span class=n>value</span><span class=p>),</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-1-12 name=__codelineno-1-12></a>
<a id=__codelineno-1-13 name=__codelineno-1-13></a><span class=hll><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>get_val</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><a id=__codelineno-1-14 name=__codelineno-1-14></a><span class=hll><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>get_next</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><a id=__codelineno-1-15 name=__codelineno-1-15></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-1-16 name=__codelineno-1-16></a><span class=p>};</span>
</code></pre></div></td></tr></tbody></table></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>为什么第 13 行使用的是 <code>Node* get_next()</code> 而不是 <code>Node* const&amp; get_next()</code> 呢? 这是为了避免利用这一函数对节点进行数据篡改. 换句话说, 前一个取值函数本身确实无法修改内部内容, 但是这一取指针函数可以永久修改指针指向的值(因为使用了取引用). 这是不安全的, 而改用副本则无此问题.</p> </div> <p>而后添加设置器函数, 可以设置节点的 <code>_value</code> 值与 <code>_next</code> 指针.</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1> 1</a></span>
<span class=normal><a href=#__codelineno-2-2> 2</a></span>
<span class=normal><a href=#__codelineno-2-3> 3</a></span>
<span class=normal><a href=#__codelineno-2-4> 4</a></span>
<span class=normal><a href=#__codelineno-2-5> 5</a></span>
<span class=normal><a href=#__codelineno-2-6> 6</a></span>
<span class=normal><a href=#__codelineno-2-7> 7</a></span>
<span class=normal><a href=#__codelineno-2-8> 8</a></span>
<span class=normal><a href=#__codelineno-2-9> 9</a></span>
<span class=normal><a href=#__codelineno-2-10>10</a></span>
<span class=normal><a href=#__codelineno-2-11>11</a></span>
<span class=normal><a href=#__codelineno-2-12>12</a></span>
<span class=normal><a href=#__codelineno-2-13>13</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
<a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=k>class</span><span class=w> </span><span class=nc>LinkedList</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-3 name=__codelineno-2-3></a>
<a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>        </span><span class=p>...</span>
<a id=__codelineno-2-5 name=__codelineno-2-5></a>
<a id=__codelineno-2-6 name=__codelineno-2-6></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>get_val</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-2-7 name=__codelineno-2-7></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>get_next</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-2-8 name=__codelineno-2-8></a>
<a id=__codelineno-2-9 name=__codelineno-2-9></a><span class=hll><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>set_val</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>val</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>val</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><a id=__codelineno-2-10 name=__codelineno-2-10></a><span class=hll><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>set_next</span><span class=p>(</span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>next</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>next</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><a id=__codelineno-2-11 name=__codelineno-2-11></a>
<a id=__codelineno-2-12 name=__codelineno-2-12></a><span class=w>        </span><span class=p>...</span>
<a id=__codelineno-2-13 name=__codelineno-2-13></a><span class=p>};</span>
</code></pre></div></td></tr></tbody></table></div> <p>这样, 我们得到了一个完整可用的节点结构体</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-3-1> 1</a></span>
<span class=normal><a href=#__codelineno-3-2> 2</a></span>
<span class=normal><a href=#__codelineno-3-3> 3</a></span>
<span class=normal><a href=#__codelineno-3-4> 4</a></span>
<span class=normal><a href=#__codelineno-3-5> 5</a></span>
<span class=normal><a href=#__codelineno-3-6> 6</a></span>
<span class=normal><a href=#__codelineno-3-7> 7</a></span>
<span class=normal><a href=#__codelineno-3-8> 8</a></span>
<span class=normal><a href=#__codelineno-3-9> 9</a></span>
<span class=normal><a href=#__codelineno-3-10>10</a></span>
<span class=normal><a href=#__codelineno-3-11>11</a></span>
<span class=normal><a href=#__codelineno-3-12>12</a></span>
<span class=normal><a href=#__codelineno-3-13>13</a></span>
<span class=normal><a href=#__codelineno-3-14>14</a></span>
<span class=normal><a href=#__codelineno-3-15>15</a></span>
<span class=normal><a href=#__codelineno-3-16>16</a></span>
<span class=normal><a href=#__codelineno-3-17>17</a></span>
<span class=normal><a href=#__codelineno-3-18>18</a></span>
<span class=normal><a href=#__codelineno-3-19>19</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
<a id=__codelineno-3-2 name=__codelineno-3-2></a><span class=k>class</span><span class=w> </span><span class=nc>LinkedList</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-3 name=__codelineno-3-3></a><span class=w> </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-3-4 name=__codelineno-3-4></a><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>Node</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-5 name=__codelineno-3-5></a><span class=w>     </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-3-6 name=__codelineno-3-6></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=n>_value</span><span class=p>;</span>
<a id=__codelineno-3-7 name=__codelineno-3-7></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>_next</span><span class=p>;</span>
<a id=__codelineno-3-8 name=__codelineno-3-8></a>
<a id=__codelineno-3-9 name=__codelineno-3-9></a><span class=w>     </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-3-10 name=__codelineno-3-10></a><span class=w>        </span><span class=n>Node</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_value</span><span class=p>(),</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-3-11 name=__codelineno-3-11></a><span class=w>        </span><span class=n>Node</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_value</span><span class=p>(</span><span class=n>value</span><span class=p>),</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-3-12 name=__codelineno-3-12></a>
<a id=__codelineno-3-13 name=__codelineno-3-13></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>get_val</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-3-14 name=__codelineno-3-14></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>get_next</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-3-15 name=__codelineno-3-15></a>
<a id=__codelineno-3-16 name=__codelineno-3-16></a><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>set_val</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>val</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>val</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-3-17 name=__codelineno-3-17></a><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>set_next</span><span class=p>(</span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>next</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>next</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-3-18 name=__codelineno-3-18></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-3-19 name=__codelineno-3-19></a><span class=p>};</span>
</code></pre></div></td></tr></tbody></table></div> <p>接下来我们实现 <code>LinkedList</code>. 首先完成其构造函数与析构函数(注意此处的 <code>size</code> 指代实际元素数量, 而非实际节点数量. 因为头节点不存值, 所以即使初始化时已经存在了一个头节点, <code>size</code> 值仍指定为 0. 我们对此有一个专门的称呼, 即<strong>哑节点(dummy node)</strong>)</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1> 1</a></span>
<span class=normal><a href=#__codelineno-4-2> 2</a></span>
<span class=normal><a href=#__codelineno-4-3> 3</a></span>
<span class=normal><a href=#__codelineno-4-4> 4</a></span>
<span class=normal><a href=#__codelineno-4-5> 5</a></span>
<span class=normal><a href=#__codelineno-4-6> 6</a></span>
<span class=normal><a href=#__codelineno-4-7> 7</a></span>
<span class=normal><a href=#__codelineno-4-8> 8</a></span>
<span class=normal><a href=#__codelineno-4-9> 9</a></span>
<span class=normal><a href=#__codelineno-4-10>10</a></span>
<span class=normal><a href=#__codelineno-4-11>11</a></span>
<span class=normal><a href=#__codelineno-4-12>12</a></span>
<span class=normal><a href=#__codelineno-4-13>13</a></span>
<span class=normal><a href=#__codelineno-4-14>14</a></span>
<span class=normal><a href=#__codelineno-4-15>15</a></span>
<span class=normal><a href=#__codelineno-4-16>16</a></span>
<span class=normal><a href=#__codelineno-4-17>17</a></span>
<span class=normal><a href=#__codelineno-4-18>18</a></span>
<span class=normal><a href=#__codelineno-4-19>19</a></span>
<span class=normal><a href=#__codelineno-4-20>20</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
<a id=__codelineno-4-2 name=__codelineno-4-2></a><span class=k>class</span><span class=w> </span><span class=nc>LinkedList</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=w> </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>Node</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>};</span>
<a id=__codelineno-4-5 name=__codelineno-4-5></a>
<a id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>    </span><span class=n>Node</span><span class=w> </span><span class=o>*</span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-4-7 name=__codelineno-4-7></a><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>_size</span><span class=p>;</span>
<a id=__codelineno-4-8 name=__codelineno-4-8></a>
<a id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w> </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>    </span><span class=n>LinkedList</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_size</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span><span class=w> </span><span class=n>_head</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>())</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-4-11 name=__codelineno-4-11></a>
<a id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>    </span><span class=o>~</span><span class=n>LinkedList</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>currentPtr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-4-14 name=__codelineno-4-14></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>currentPtr</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>            </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>nextPtr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>currentPtr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-4-16 name=__codelineno-4-16></a><span class=w>            </span><span class=k>delete</span><span class=w> </span><span class=n>currentPtr</span><span class=p>;</span>
<a id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>            </span><span class=n>currentPtr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>nextPtr</span><span class=p>;</span>
<a id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-4-20 name=__codelineno-4-20></a><span class=p>};</span>
</code></pre></div></td></tr></tbody></table></div> <p>原博客的作者还添加了迭代器. 迭代器是一种将具体指针抽象化的抽象层, 例如上述的链表中我们查询对应的指针时相当麻烦, 改用迭代器就可以使用类似于 <code>i++</code> 的方式简洁优雅地完成查询.</p> <p>如前面所述, 迭代器就是将具体指针抽象化的抽象层, 因此我们只需要存储一个内部的值, 即指向节点的指针. 要完成这个迭代器, 至少需要重载这几个运算符: <code>++</code>, <code>==</code>, <code>!=</code>, 并且在外层(即链表层) <code>begin()</code>, <code>end()</code> 两个返回迭代器的函数. 同样, 我们至少需要为迭代器设置拷贝构造函数. 具体实现后的完整代码如下</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-5-1> 1</a></span>
<span class=normal><a href=#__codelineno-5-2> 2</a></span>
<span class=normal><a href=#__codelineno-5-3> 3</a></span>
<span class=normal><a href=#__codelineno-5-4> 4</a></span>
<span class=normal><a href=#__codelineno-5-5> 5</a></span>
<span class=normal><a href=#__codelineno-5-6> 6</a></span>
<span class=normal><a href=#__codelineno-5-7> 7</a></span>
<span class=normal><a href=#__codelineno-5-8> 8</a></span>
<span class=normal><a href=#__codelineno-5-9> 9</a></span>
<span class=normal><a href=#__codelineno-5-10>10</a></span>
<span class=normal><a href=#__codelineno-5-11>11</a></span>
<span class=normal><a href=#__codelineno-5-12>12</a></span>
<span class=normal><a href=#__codelineno-5-13>13</a></span>
<span class=normal><a href=#__codelineno-5-14>14</a></span>
<span class=normal><a href=#__codelineno-5-15>15</a></span>
<span class=normal><a href=#__codelineno-5-16>16</a></span>
<span class=normal><a href=#__codelineno-5-17>17</a></span>
<span class=normal><a href=#__codelineno-5-18>18</a></span>
<span class=normal><a href=#__codelineno-5-19>19</a></span>
<span class=normal><a href=#__codelineno-5-20>20</a></span>
<span class=normal><a href=#__codelineno-5-21>21</a></span>
<span class=normal><a href=#__codelineno-5-22>22</a></span>
<span class=normal><a href=#__codelineno-5-23>23</a></span>
<span class=normal><a href=#__codelineno-5-24>24</a></span>
<span class=normal><a href=#__codelineno-5-25>25</a></span>
<span class=normal><a href=#__codelineno-5-26>26</a></span>
<span class=normal><a href=#__codelineno-5-27>27</a></span>
<span class=normal><a href=#__codelineno-5-28>28</a></span>
<span class=normal><a href=#__codelineno-5-29>29</a></span>
<span class=normal><a href=#__codelineno-5-30>30</a></span>
<span class=normal><a href=#__codelineno-5-31>31</a></span>
<span class=normal><a href=#__codelineno-5-32>32</a></span>
<span class=normal><a href=#__codelineno-5-33>33</a></span>
<span class=normal><a href=#__codelineno-5-34>34</a></span>
<span class=normal><a href=#__codelineno-5-35>35</a></span>
<span class=normal><a href=#__codelineno-5-36>36</a></span>
<span class=normal><a href=#__codelineno-5-37>37</a></span>
<span class=normal><a href=#__codelineno-5-38>38</a></span>
<span class=normal><a href=#__codelineno-5-39>39</a></span>
<span class=normal><a href=#__codelineno-5-40>40</a></span>
<span class=normal><a href=#__codelineno-5-41>41</a></span>
<span class=normal><a href=#__codelineno-5-42>42</a></span>
<span class=normal><a href=#__codelineno-5-43>43</a></span>
<span class=normal><a href=#__codelineno-5-44>44</a></span>
<span class=normal><a href=#__codelineno-5-45>45</a></span>
<span class=normal><a href=#__codelineno-5-46>46</a></span>
<span class=normal><a href=#__codelineno-5-47>47</a></span>
<span class=normal><a href=#__codelineno-5-48>48</a></span>
<span class=normal><a href=#__codelineno-5-49>49</a></span>
<span class=normal><a href=#__codelineno-5-50>50</a></span>
<span class=normal><a href=#__codelineno-5-51>51</a></span>
<span class=normal><a href=#__codelineno-5-52>52</a></span>
<span class=normal><a href=#__codelineno-5-53>53</a></span>
<span class=normal><a href=#__codelineno-5-54>54</a></span>
<span class=normal><a href=#__codelineno-5-55>55</a></span>
<span class=normal><a href=#__codelineno-5-56>56</a></span>
<span class=normal><a href=#__codelineno-5-57>57</a></span>
<span class=normal><a href=#__codelineno-5-58>58</a></span>
<span class=normal><a href=#__codelineno-5-59>59</a></span>
<span class=normal><a href=#__codelineno-5-60>60</a></span>
<span class=normal><a href=#__codelineno-5-61>61</a></span>
<span class=normal><a href=#__codelineno-5-62>62</a></span>
<span class=normal><a href=#__codelineno-5-63>63</a></span>
<span class=normal><a href=#__codelineno-5-64>64</a></span>
<span class=normal><a href=#__codelineno-5-65>65</a></span>
<span class=normal><a href=#__codelineno-5-66>66</a></span>
<span class=normal><a href=#__codelineno-5-67>67</a></span>
<span class=normal><a href=#__codelineno-5-68>68</a></span>
<span class=normal><a href=#__codelineno-5-69>69</a></span>
<span class=normal><a href=#__codelineno-5-70>70</a></span>
<span class=normal><a href=#__codelineno-5-71>71</a></span>
<span class=normal><a href=#__codelineno-5-72>72</a></span>
<span class=normal><a href=#__codelineno-5-73>73</a></span>
<span class=normal><a href=#__codelineno-5-74>74</a></span>
<span class=normal><a href=#__codelineno-5-75>75</a></span>
<span class=normal><a href=#__codelineno-5-76>76</a></span>
<span class=normal><a href=#__codelineno-5-77>77</a></span>
<span class=normal><a href=#__codelineno-5-78>78</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;cstddef&gt;</span>
<a id=__codelineno-5-2 name=__codelineno-5-2></a>
<a id=__codelineno-5-3 name=__codelineno-5-3></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
<a id=__codelineno-5-4 name=__codelineno-5-4></a><span class=k>class</span><span class=w> </span><span class=nc>LinkedList</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-5 name=__codelineno-5-5></a><span class=w> </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-5-6 name=__codelineno-5-6></a><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>Node</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-7 name=__codelineno-5-7></a><span class=w>     </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-5-8 name=__codelineno-5-8></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=n>_value</span><span class=p>;</span>
<a id=__codelineno-5-9 name=__codelineno-5-9></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>_next</span><span class=p>;</span>
<a id=__codelineno-5-10 name=__codelineno-5-10></a>
<a id=__codelineno-5-11 name=__codelineno-5-11></a><span class=w>     </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-5-12 name=__codelineno-5-12></a><span class=w>        </span><span class=n>Node</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_value</span><span class=p>(),</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-5-13 name=__codelineno-5-13></a><span class=w>        </span><span class=n>Node</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_value</span><span class=p>(</span><span class=n>value</span><span class=p>),</span><span class=w> </span><span class=n>_next</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-5-14 name=__codelineno-5-14></a>
<a id=__codelineno-5-15 name=__codelineno-5-15></a><span class=w>        </span><span class=cm>/* </span>
<a id=__codelineno-5-16 name=__codelineno-5-16></a><span class=cm>        * 此处额外添加了适配迭代器的取值函数, 可以直接借此修改值. </span>
<a id=__codelineno-5-17 name=__codelineno-5-17></a><span class=cm>        * 保留 const 返回类型方便 const 情况下的取值 </span>
<a id=__codelineno-5-18 name=__codelineno-5-18></a><span class=cm>        */</span>
<a id=__codelineno-5-19 name=__codelineno-5-19></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>get_val</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-20 name=__codelineno-5-20></a><span class=w>        </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=n>get_val</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=p>;</span><span class=w> </span><span class=p>}</span><span class=w>    </span>
<a id=__codelineno-5-21 name=__codelineno-5-21></a>
<a id=__codelineno-5-22 name=__codelineno-5-22></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>get_next</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>nullptr</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-23 name=__codelineno-5-23></a>
<a id=__codelineno-5-24 name=__codelineno-5-24></a><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>set_val</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>val</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>val</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-25 name=__codelineno-5-25></a><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>set_next</span><span class=p>(</span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>next</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_next</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>next</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-26 name=__codelineno-5-26></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-5-27 name=__codelineno-5-27></a>
<a id=__codelineno-5-28 name=__codelineno-5-28></a><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>Iterator</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-29 name=__codelineno-5-29></a><span class=w>     </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-5-30 name=__codelineno-5-30></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>_ptr</span><span class=p>;</span>
<a id=__codelineno-5-31 name=__codelineno-5-31></a>
<a id=__codelineno-5-32 name=__codelineno-5-32></a><span class=w>     </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-5-33 name=__codelineno-5-33></a><span class=w>        </span><span class=n>Iterator</span><span class=p>(</span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>ptr</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_ptr</span><span class=p>(</span><span class=n>ptr</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-5-34 name=__codelineno-5-34></a>
<a id=__codelineno-5-35 name=__codelineno-5-35></a><span class=w>        </span><span class=c1>// 常值取值函数, 重载运算符 *()</span>
<a id=__codelineno-5-36 name=__codelineno-5-36></a><span class=w>        </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>*</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>_ptr</span><span class=o>-&gt;</span><span class=n>get_val</span><span class=p>();</span><span class=w> </span><span class=p>}</span><span class=w>  </span>
<a id=__codelineno-5-37 name=__codelineno-5-37></a><span class=w>        </span><span class=c1>// 非常值取值函数, 重载运算符 *()</span>
<a id=__codelineno-5-38 name=__codelineno-5-38></a><span class=w>        </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>*</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>_ptr</span><span class=o>-&gt;</span><span class=n>get_val</span><span class=p>();</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-39 name=__codelineno-5-39></a><span class=w>        </span><span class=c1>// 左增函数, 重载运算符 ++()</span>
<a id=__codelineno-5-40 name=__codelineno-5-40></a><span class=w>        </span><span class=n>Iterator</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>++</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-5-41 name=__codelineno-5-41></a><span class=w>            </span><span class=n>_ptr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>_ptr</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>nullptr</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>_ptr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>nullptr</span><span class=p>);</span><span class=w> </span>
<a id=__codelineno-5-42 name=__codelineno-5-42></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span><span class=w> </span>
<a id=__codelineno-5-43 name=__codelineno-5-43></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-5-44 name=__codelineno-5-44></a><span class=w>        </span><span class=cm>/* </span>
<a id=__codelineno-5-45 name=__codelineno-5-45></a><span class=cm>        * 右增函数, 重载运算符 ()++. </span>
<a id=__codelineno-5-46 name=__codelineno-5-46></a><span class=cm>        * 此处非引用是因为返回的是自增前的拷贝值, 新值因为自增直接引用的话和前面没有区别; </span>
<a id=__codelineno-5-47 name=__codelineno-5-47></a><span class=cm>        * 此处 int 并非整型, 是表示后置 ++ 的占位符 </span>
<a id=__codelineno-5-48 name=__codelineno-5-48></a><span class=cm>        */</span>
<a id=__codelineno-5-49 name=__codelineno-5-49></a><span class=w>        </span><span class=n>Iterator</span><span class=w> </span><span class=k>operator</span><span class=o>++</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-5-50 name=__codelineno-5-50></a><span class=w>            </span><span class=n>Iterator</span><span class=w> </span><span class=nf>temp</span><span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>);</span><span class=w> </span><span class=n>_ptr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>_ptr</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>nullptr</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>_ptr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>nullptr</span><span class=p>);</span><span class=w> </span>
<a id=__codelineno-5-51 name=__codelineno-5-51></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>temp</span><span class=p>;</span><span class=w> </span>
<a id=__codelineno-5-52 name=__codelineno-5-52></a><span class=w>        </span><span class=p>}</span><span class=w>    </span>
<a id=__codelineno-5-53 name=__codelineno-5-53></a>
<a id=__codelineno-5-54 name=__codelineno-5-54></a><span class=w>        </span><span class=c1>// == &amp; != 重载运算符, 形参 rhs 表示右值, 此处 const&amp; 就是指在不修改值前提下引用</span>
<a id=__codelineno-5-55 name=__codelineno-5-55></a><span class=w>        </span><span class=kt>bool</span><span class=w> </span><span class=k>operator</span><span class=o>==</span><span class=p>(</span><span class=n>Iterator</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>rhs</span><span class=p>)</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>_ptr</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>rhs</span><span class=p>.</span><span class=n>_ptr</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-56 name=__codelineno-5-56></a><span class=w>        </span><span class=kt>bool</span><span class=w> </span><span class=k>operator</span><span class=o>!=</span><span class=p>(</span><span class=n>Iterator</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>rhs</span><span class=p>)</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>_ptr</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>rhs</span><span class=p>.</span><span class=n>_ptr</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-57 name=__codelineno-5-57></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-5-58 name=__codelineno-5-58></a>
<a id=__codelineno-5-59 name=__codelineno-5-59></a><span class=w>    </span><span class=n>Node</span><span class=w> </span><span class=o>*</span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-5-60 name=__codelineno-5-60></a><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>_size</span><span class=p>;</span>
<a id=__codelineno-5-61 name=__codelineno-5-61></a>
<a id=__codelineno-5-62 name=__codelineno-5-62></a><span class=w> </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-5-63 name=__codelineno-5-63></a><span class=w>    </span><span class=n>LinkedList</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_size</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span><span class=w> </span><span class=n>_head</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>())</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-5-64 name=__codelineno-5-64></a>
<a id=__codelineno-5-65 name=__codelineno-5-65></a><span class=w>    </span><span class=o>~</span><span class=n>LinkedList</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-66 name=__codelineno-5-66></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>currentPtr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-5-67 name=__codelineno-5-67></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>currentPtr</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-68 name=__codelineno-5-68></a><span class=w>            </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>nextPtr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>currentPtr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-5-69 name=__codelineno-5-69></a><span class=w>            </span><span class=k>delete</span><span class=w> </span><span class=n>currentPtr</span><span class=p>;</span>
<a id=__codelineno-5-70 name=__codelineno-5-70></a><span class=w>            </span><span class=n>currentPtr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>nextPtr</span><span class=p>;</span>
<a id=__codelineno-5-71 name=__codelineno-5-71></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-5-72 name=__codelineno-5-72></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-5-73 name=__codelineno-5-73></a>
<a id=__codelineno-5-74 name=__codelineno-5-74></a><span class=w>    </span><span class=c1>// 头节点是哑节点, 因此需要用下一个值作为真正的头节点</span>
<a id=__codelineno-5-75 name=__codelineno-5-75></a><span class=w>    </span><span class=n>Iterator</span><span class=w> </span><span class=n>begin</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>Iterator</span><span class=p>(</span><span class=n>_head</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>());</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-76 name=__codelineno-5-76></a><span class=w>    </span><span class=c1>// 链表的最后一个指向的指针就是 nullptr</span>
<a id=__codelineno-5-77 name=__codelineno-5-77></a><span class=w>    </span><span class=n>Iterator</span><span class=w> </span><span class=n>end</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>Iterator</span><span class=p>(</span><span class=k>nullptr</span><span class=p>);</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-78 name=__codelineno-5-78></a><span class=p>};</span>
</code></pre></div></td></tr></tbody></table></div> <p>当然, 只有此部分使用单链表仍然是不够灵活的. 我们完全可以添加一个<code>[]</code> 运算符重载, 实现类似于数组的访问方式. 同时可以利用已有的元数据完善一些函数</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1> 1</a></span>
<span class=normal><a href=#__codelineno-6-2> 2</a></span>
<span class=normal><a href=#__codelineno-6-3> 3</a></span>
<span class=normal><a href=#__codelineno-6-4> 4</a></span>
<span class=normal><a href=#__codelineno-6-5> 5</a></span>
<span class=normal><a href=#__codelineno-6-6> 6</a></span>
<span class=normal><a href=#__codelineno-6-7> 7</a></span>
<span class=normal><a href=#__codelineno-6-8> 8</a></span>
<span class=normal><a href=#__codelineno-6-9> 9</a></span>
<span class=normal><a href=#__codelineno-6-10>10</a></span>
<span class=normal><a href=#__codelineno-6-11>11</a></span>
<span class=normal><a href=#__codelineno-6-12>12</a></span>
<span class=normal><a href=#__codelineno-6-13>13</a></span>
<span class=normal><a href=#__codelineno-6-14>14</a></span>
<span class=normal><a href=#__codelineno-6-15>15</a></span>
<span class=normal><a href=#__codelineno-6-16>16</a></span>
<span class=normal><a href=#__codelineno-6-17>17</a></span>
<span class=normal><a href=#__codelineno-6-18>18</a></span>
<span class=normal><a href=#__codelineno-6-19>19</a></span>
<span class=normal><a href=#__codelineno-6-20>20</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
<a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=k>class</span><span class=w> </span><span class=nc>LinkedList</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-6-3 name=__codelineno-6-3></a>
<a id=__codelineno-6-4 name=__codelineno-6-4></a><span class=w>    </span><span class=p>...</span>
<a id=__codelineno-6-5 name=__codelineno-6-5></a>
<a id=__codelineno-6-6 name=__codelineno-6-6></a><span class=w> </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-6-7 name=__codelineno-6-7></a>
<a id=__codelineno-6-8 name=__codelineno-6-8></a><span class=w>    </span><span class=p>...</span>
<a id=__codelineno-6-9 name=__codelineno-6-9></a>
<a id=__codelineno-6-10 name=__codelineno-6-10></a><span class=w>    </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=p>[](</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-6-11 name=__codelineno-6-11></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_head</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-6-12 name=__codelineno-6-12></a><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-6-13 name=__codelineno-6-13></a><span class=w>            </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=w> </span><span class=p>;</span><span class=w> </span>
<a id=__codelineno-6-14 name=__codelineno-6-14></a><span class=w>        </span><span class=p>}</span><span class=w> </span>
<a id=__codelineno-6-15 name=__codelineno-6-15></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_val</span><span class=p>();</span><span class=w> </span>
<a id=__codelineno-6-16 name=__codelineno-6-16></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-6-17 name=__codelineno-6-17></a>
<a id=__codelineno-6-18 name=__codelineno-6-18></a><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>_size</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-6-19 name=__codelineno-6-19></a><span class=w>    </span><span class=kt>bool</span><span class=w> </span><span class=n>is_empty</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>_size</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-6-20 name=__codelineno-6-20></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>在现代 <code>C++</code> 中之所以保留不设边界检查的 <code>[]</code> 操作符, 很大程度上是为了保证这一操作的效率. 这一点在数据量极其大的时候十分明显. 在各个函数的声明中, 可能大家会奇怪为什么有些是常量, 有些是引用量等等, 实际上很大一部分都是实际编程中积累经验改进得到的. 总之, <code>C++</code> 中仍然保留的 <code>C</code> 特性的原因实际上远远不止于保持兼容性, 很多时候是因为 <code>C</code> 本身就是很优秀的程序语言, 本身就有许多可取之处.</p> </div> <p>为了方便头部操作, 我们常常需要额外添加一个返回首个有效项值的函数</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=nf>head</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>_head</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>get_val</span><span class=p>();</span><span class=w> </span><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <h3 id=22>2.2 增删查<a class=headerlink href=#22 title="Permanent link">§</a></h3> <div class="admonition note"> <p class=admonition-title>Note</p> <p>实际上, 有了迭代器之后可以直接使用算法库中的 <code>find</code> 函数. 不过为了保证自身的完整性, 这里也会提供非算法库的 <code>find</code> 函数. </p> <p>另外, 目前实现这些数据结构的目的是学习原理, 实现过程会显得相当混乱. 实际上(几乎)所有编译器的 <code>STL</code> 库都相当优秀, 会考虑大量其他问题(如何时适合插入 <code>noexcept</code> 优化性能). 不过这会涉及大量不属于算法设计领域的问题, 因此这里不做赘述.</p> <p>程序编程过程中必须要注意, 任何一项与 <code>delete</code> 相关的操作进行之前必须要确保前后链表结构不被破坏.</p> </div> <p>在完善增删查函数之前, 我们先重载更丰富的构造函数</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span>
<span class=normal><a href=#__codelineno-8-14>14</a></span>
<span class=normal><a href=#__codelineno-8-15>15</a></span>
<span class=normal><a href=#__codelineno-8-16>16</a></span>
<span class=normal><a href=#__codelineno-8-17>17</a></span>
<span class=normal><a href=#__codelineno-8-18>18</a></span>
<span class=normal><a href=#__codelineno-8-19>19</a></span>
<span class=normal><a href=#__codelineno-8-20>20</a></span>
<span class=normal><a href=#__codelineno-8-21>21</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=cm>/* 预留链表大小的构造函数 */</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a><span class=n>LinkedList</span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_size</span><span class=p>(</span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=w>    </span><span class=n>_head</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>();</span>
<a id=__codelineno-8-4 name=__codelineno-8-4></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>ptr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>();</span>
<a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=w>        </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=n>temp</span><span class=p>);</span>
<a id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w>        </span><span class=n>ptr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>temp</span><span class=p>;</span>
<a id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-8-10 name=__codelineno-8-10></a><span class=p>}</span>
<a id=__codelineno-8-11 name=__codelineno-8-11></a>
<a id=__codelineno-8-12 name=__codelineno-8-12></a><span class=cm>/* 预留链表大小和默认值的构造函数 */</span>
<a id=__codelineno-8-13 name=__codelineno-8-13></a><span class=n>LinkedList</span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>val</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>_size</span><span class=p>(</span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-14 name=__codelineno-8-14></a><span class=w>    </span><span class=n>_head</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>();</span>
<a id=__codelineno-8-15 name=__codelineno-8-15></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>ptr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-8-16 name=__codelineno-8-16></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-17 name=__codelineno-8-17></a><span class=w>        </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>(</span><span class=n>val</span><span class=p>);</span>
<a id=__codelineno-8-18 name=__codelineno-8-18></a><span class=w>        </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=n>temp</span><span class=p>);</span>
<a id=__codelineno-8-19 name=__codelineno-8-19></a><span class=w>        </span><span class=n>ptr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>temp</span><span class=p>;</span>
<a id=__codelineno-8-20 name=__codelineno-8-20></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-8-21 name=__codelineno-8-21></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <p>在此基础上, 我们添加 <code>push_front</code> 在头(哑)节点后面新增节点的函数, <code>insert</code> 实现类似于数组风格的新增节点和在某个节点后面新增节点的功能(注意每次操作同时要修改表的元数据)</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1> 1</a></span>
<span class=normal><a href=#__codelineno-9-2> 2</a></span>
<span class=normal><a href=#__codelineno-9-3> 3</a></span>
<span class=normal><a href=#__codelineno-9-4> 4</a></span>
<span class=normal><a href=#__codelineno-9-5> 5</a></span>
<span class=normal><a href=#__codelineno-9-6> 6</a></span>
<span class=normal><a href=#__codelineno-9-7> 7</a></span>
<span class=normal><a href=#__codelineno-9-8> 8</a></span>
<span class=normal><a href=#__codelineno-9-9> 9</a></span>
<span class=normal><a href=#__codelineno-9-10>10</a></span>
<span class=normal><a href=#__codelineno-9-11>11</a></span>
<span class=normal><a href=#__codelineno-9-12>12</a></span>
<span class=normal><a href=#__codelineno-9-13>13</a></span>
<span class=normal><a href=#__codelineno-9-14>14</a></span>
<span class=normal><a href=#__codelineno-9-15>15</a></span>
<span class=normal><a href=#__codelineno-9-16>16</a></span>
<span class=normal><a href=#__codelineno-9-17>17</a></span>
<span class=normal><a href=#__codelineno-9-18>18</a></span>
<span class=normal><a href=#__codelineno-9-19>19</a></span>
<span class=normal><a href=#__codelineno-9-20>20</a></span>
<span class=normal><a href=#__codelineno-9-21>21</a></span>
<span class=normal><a href=#__codelineno-9-22>22</a></span>
<span class=normal><a href=#__codelineno-9-23>23</a></span>
<span class=normal><a href=#__codelineno-9-24>24</a></span>
<span class=normal><a href=#__codelineno-9-25>25</a></span>
<span class=normal><a href=#__codelineno-9-26>26</a></span>
<span class=normal><a href=#__codelineno-9-27>27</a></span>
<span class=normal><a href=#__codelineno-9-28>28</a></span>
<span class=normal><a href=#__codelineno-9-29>29</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=kt>void</span><span class=w> </span><span class=nf>push_front</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>ele</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_head</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-9-3 name=__codelineno-9-3></a><span class=w>    </span><span class=n>_head</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>(</span><span class=n>ele</span><span class=p>));</span>
<a id=__codelineno-9-4 name=__codelineno-9-4></a><span class=w>    </span><span class=n>_head</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=n>temp</span><span class=p>);</span>
<a id=__codelineno-9-5 name=__codelineno-9-5></a><span class=w>    </span><span class=n>_size</span><span class=o>++</span><span class=p>;</span>
<a id=__codelineno-9-6 name=__codelineno-9-6></a><span class=p>}</span>
<a id=__codelineno-9-7 name=__codelineno-9-7></a>
<a id=__codelineno-9-8 name=__codelineno-9-8></a><span class=kt>void</span><span class=w> </span><span class=nf>insert</span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>ele</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-9 name=__codelineno-9-9></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>_size</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-10 name=__codelineno-9-10></a><span class=w>        </span><span class=c1>// insert 必须要防止越界</span>
<a id=__codelineno-9-11 name=__codelineno-9-11></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>out_of_range</span><span class=p>(</span><span class=s>"Insert position out of range"</span><span class=p>);</span>
<a id=__codelineno-9-12 name=__codelineno-9-12></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-9-13 name=__codelineno-9-13></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-9-14 name=__codelineno-9-14></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-15 name=__codelineno-9-15></a><span class=w>        </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-9-16 name=__codelineno-9-16></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-9-17 name=__codelineno-9-17></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp_</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-9-18 name=__codelineno-9-18></a><span class=w>    </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>(</span><span class=n>ele</span><span class=p>));</span>
<a id=__codelineno-9-19 name=__codelineno-9-19></a><span class=w>    </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=n>temp_</span><span class=p>);</span>
<a id=__codelineno-9-20 name=__codelineno-9-20></a><span class=w>    </span><span class=c1>// 记住每次进行增删之后都要修改元数据</span>
<a id=__codelineno-9-21 name=__codelineno-9-21></a><span class=w>    </span><span class=n>_size</span><span class=o>++</span><span class=p>;</span>
<a id=__codelineno-9-22 name=__codelineno-9-22></a><span class=p>}</span>
<a id=__codelineno-9-23 name=__codelineno-9-23></a>
<a id=__codelineno-9-24 name=__codelineno-9-24></a><span class=kt>void</span><span class=w> </span><span class=nf>insert</span><span class=p>(</span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=o>&amp;</span><span class=n>ptr</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>ele</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-25 name=__codelineno-9-25></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-9-26 name=__codelineno-9-26></a><span class=w>    </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Node</span><span class=p>(</span><span class=n>ele</span><span class=p>));</span>
<a id=__codelineno-9-27 name=__codelineno-9-27></a><span class=w>    </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=n>temp</span><span class=p>);</span>
<a id=__codelineno-9-28 name=__codelineno-9-28></a><span class=w>    </span><span class=n>_size</span><span class=o>++</span><span class=p>;</span>
<a id=__codelineno-9-29 name=__codelineno-9-29></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <p>接下来添加 <code>remove</code> 删除函数. 其参数可以为某个节点(会删除下一个节点), 也可以为类似于数组那样的下标. 另外也可以添加 <code>clear</code> 清空函数, 将 <code>size</code> 清空</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1> 1</a></span>
<span class=normal><a href=#__codelineno-10-2> 2</a></span>
<span class=normal><a href=#__codelineno-10-3> 3</a></span>
<span class=normal><a href=#__codelineno-10-4> 4</a></span>
<span class=normal><a href=#__codelineno-10-5> 5</a></span>
<span class=normal><a href=#__codelineno-10-6> 6</a></span>
<span class=normal><a href=#__codelineno-10-7> 7</a></span>
<span class=normal><a href=#__codelineno-10-8> 8</a></span>
<span class=normal><a href=#__codelineno-10-9> 9</a></span>
<span class=normal><a href=#__codelineno-10-10>10</a></span>
<span class=normal><a href=#__codelineno-10-11>11</a></span>
<span class=normal><a href=#__codelineno-10-12>12</a></span>
<span class=normal><a href=#__codelineno-10-13>13</a></span>
<span class=normal><a href=#__codelineno-10-14>14</a></span>
<span class=normal><a href=#__codelineno-10-15>15</a></span>
<span class=normal><a href=#__codelineno-10-16>16</a></span>
<span class=normal><a href=#__codelineno-10-17>17</a></span>
<span class=normal><a href=#__codelineno-10-18>18</a></span>
<span class=normal><a href=#__codelineno-10-19>19</a></span>
<span class=normal><a href=#__codelineno-10-20>20</a></span>
<span class=normal><a href=#__codelineno-10-21>21</a></span>
<span class=normal><a href=#__codelineno-10-22>22</a></span>
<span class=normal><a href=#__codelineno-10-23>23</a></span>
<span class=normal><a href=#__codelineno-10-24>24</a></span>
<span class=normal><a href=#__codelineno-10-25>25</a></span>
<span class=normal><a href=#__codelineno-10-26>26</a></span>
<span class=normal><a href=#__codelineno-10-27>27</a></span>
<span class=normal><a href=#__codelineno-10-28>28</a></span>
<span class=normal><a href=#__codelineno-10-29>29</a></span>
<span class=normal><a href=#__codelineno-10-30>30</a></span>
<span class=normal><a href=#__codelineno-10-31>31</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=kt>void</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>_size</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-3 name=__codelineno-10-3></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>out_of_range</span><span class=p>(</span><span class=s>"Insert position out of range"</span><span class=p>);</span>
<a id=__codelineno-10-4 name=__codelineno-10-4></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-10-5 name=__codelineno-10-5></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_head</span><span class=p>;</span>
<a id=__codelineno-10-6 name=__codelineno-10-6></a><span class=w>    </span><span class=k>while</span><span class=p>(</span><span class=n>i</span><span class=o>--</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-7 name=__codelineno-10-7></a><span class=w>        </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-8 name=__codelineno-10-8></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-10-9 name=__codelineno-10-9></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>rig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-10 name=__codelineno-10-10></a><span class=w>    </span><span class=k>delete</span><span class=w> </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-11 name=__codelineno-10-11></a><span class=w>    </span><span class=n>temp</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=n>rig</span><span class=p>);</span>
<a id=__codelineno-10-12 name=__codelineno-10-12></a><span class=w>    </span><span class=n>_size</span><span class=o>--</span><span class=p>;</span>
<a id=__codelineno-10-13 name=__codelineno-10-13></a><span class=p>}</span>
<a id=__codelineno-10-14 name=__codelineno-10-14></a>
<a id=__codelineno-10-15 name=__codelineno-10-15></a><span class=kt>void</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>ptr</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-16 name=__codelineno-10-16></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-17 name=__codelineno-10-17></a><span class=w>    </span><span class=k>delete</span><span class=w> </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-18 name=__codelineno-10-18></a><span class=w>    </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>set_next</span><span class=p>(</span><span class=n>temp</span><span class=p>);</span>
<a id=__codelineno-10-19 name=__codelineno-10-19></a><span class=w>    </span><span class=n>_size</span><span class=o>--</span><span class=p>;</span>
<a id=__codelineno-10-20 name=__codelineno-10-20></a><span class=p>}</span>
<a id=__codelineno-10-21 name=__codelineno-10-21></a>
<a id=__codelineno-10-22 name=__codelineno-10-22></a><span class=kt>void</span><span class=w> </span><span class=nf>clear</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-23 name=__codelineno-10-23></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>pre</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_head</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-24 name=__codelineno-10-24></a><span class=w>    </span><span class=n>Node</span><span class=o>*</span><span class=w> </span><span class=n>now</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>pre</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-25 name=__codelineno-10-25></a><span class=w>    </span><span class=k>while</span><span class=p>(</span><span class=n>pre</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>nullptr</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-26 name=__codelineno-10-26></a><span class=w>        </span><span class=k>delete</span><span class=w> </span><span class=n>pre</span><span class=p>;</span>
<a id=__codelineno-10-27 name=__codelineno-10-27></a><span class=w>        </span><span class=n>pre</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>now</span><span class=p>;</span>
<a id=__codelineno-10-28 name=__codelineno-10-28></a><span class=w>        </span><span class=n>now</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>now</span><span class=o>-&gt;</span><span class=n>get_next</span><span class=p>();</span>
<a id=__codelineno-10-29 name=__codelineno-10-29></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-10-30 name=__codelineno-10-30></a><span class=w>    </span><span class=n>_size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-10-31 name=__codelineno-10-31></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <p>接下来是 <code>find</code> 查找函数的部分. 如果未查找到则返回 <code>end()</code> 值(即 <code>Iterator(nullptr)</code>).</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span>
<span class=normal><a href=#__codelineno-11-2>2</a></span>
<span class=normal><a href=#__codelineno-11-3>3</a></span>
<span class=normal><a href=#__codelineno-11-4>4</a></span>
<span class=normal><a href=#__codelineno-11-5>5</a></span>
<span class=normal><a href=#__codelineno-11-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=n>Iterator</span><span class=w> </span><span class=nf>find</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>ele</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>begin</span><span class=p>();</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>end</span><span class=p>();</span><span class=w> </span><span class=n>it</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-3 name=__codelineno-11-3></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ele</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=o>*</span><span class=n>it</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>it</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-11-4 name=__codelineno-11-4></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-11-5 name=__codelineno-11-5></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=o>-&gt;</span><span class=n>end</span><span class=p>();</span>
<a id=__codelineno-11-6 name=__codelineno-11-6></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>上述程序可能存在细节上的问题, 尤其是和越界问题相关的部分. 这一部分算是在下刻意留下的(哈哈哈当然你认为我懒也没问题). 如果需要参考程序的话可以查看我比较认真写的<a href=https://github.com/HollowDobt/algorithm/blob/main/linked-list/llist.cpp>双向链表</a>版本, 实现方法是现代 <code>C++</code> 语言并且也是 <code>C++</code> 风格.</p> </div> <h3 id=23>2.3 链表的应用<a class=headerlink href=#23 title="Permanent link">§</a></h3> <h4 id=231>2.3.1 基数排序<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup><a class=headerlink href=#231 title="Permanent link">§</a></h4> <p>基数排序, 简单来说是基于分类思想的排序方式. 其最大的特点是原理上不需要进行数之间的比较, 每一轮根据所有数的某一位数调整排列顺序, 保证第 <span class=arithmatex>\(X\)</span> 轮后每个数的后面 <span class=arithmatex>\(X\)</span> 位全部排序完成, 同时保证在第 <span class=arithmatex>\(X+1\)</span> 轮以及之后的排序调整有更高优先级.</p> <p>下面给出一个实例(桶 <span class=arithmatex>\(0\)</span> 表示桶内对应位数的值为 <span class=arithmatex>\(0\)</span>, 如 <span class=arithmatex>\(0720\)</span> 在 <span class=arithmatex>\(Pass1\)</span> 中对应位数值为 <span class=arithmatex>\(0\)</span>, 故排在桶 <span class=arithmatex>\(0\)</span>. 其余同理)</p> <pre class=mermaid><code>flowchart TD
    A[初始数组: 0329, 0457, 0657, 0839, 0436, 0720, 0355]

    subgraph P1[Pass 1 · 个位]
        B0[桶0: 0720]
        B5[桶5: 0355]
        B6[桶6: 0436]
        B7[桶7: 0457, 0657]
        B9[桶9: 0329, 0839]
        BRes[结果: 0720, 0355, 0436, 0457, 0657, 0329, 0839]
    end

    subgraph P2[Pass 2 · 十位]
        C2[桶2: 0720, 0329]
        C3[桶3: 0436, 0839]
        C5[桶5: 0355, 0457, 0657]
        CRes[结果: 0720, 0329, 0436, 0839, 0355, 0457, 0657]
    end

    subgraph P3[Pass 3 · 百位]
        D3[桶3: 0329, 0355]
        D4[桶4: 0436, 0457]
        D6[桶6: 0657]
        D7[桶7: 0720]
        D8[桶8: 0839]
        DRes[结果: 0329, 0355, 0436, 0457, 0657, 0720, 0839]
    end

    subgraph P4[Pass 4 · 千位]
        E0[桶0: 所有元素]
        ERes[最终结果: 0329, 0355, 0436, 0457, 0657, 0720, 0839]
    end

    A --&gt; BRes --&gt; CRes --&gt; DRes --&gt; ERes
</code></pre> <p>这一排序的具体代码实现如下(以 <span class=arithmatex>\(10\)</span> 位整数为例)</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1> 1</a></span>
<span class=normal><a href=#__codelineno-12-2> 2</a></span>
<span class=normal><a href=#__codelineno-12-3> 3</a></span>
<span class=normal><a href=#__codelineno-12-4> 4</a></span>
<span class=normal><a href=#__codelineno-12-5> 5</a></span>
<span class=normal><a href=#__codelineno-12-6> 6</a></span>
<span class=normal><a href=#__codelineno-12-7> 7</a></span>
<span class=normal><a href=#__codelineno-12-8> 8</a></span>
<span class=normal><a href=#__codelineno-12-9> 9</a></span>
<span class=normal><a href=#__codelineno-12-10>10</a></span>
<span class=normal><a href=#__codelineno-12-11>11</a></span>
<span class=normal><a href=#__codelineno-12-12>12</a></span>
<span class=normal><a href=#__codelineno-12-13>13</a></span>
<span class=normal><a href=#__codelineno-12-14>14</a></span>
<span class=normal><a href=#__codelineno-12-15>15</a></span>
<span class=normal><a href=#__codelineno-12-16>16</a></span>
<span class=normal><a href=#__codelineno-12-17>17</a></span>
<span class=normal><a href=#__codelineno-12-18>18</a></span>
<span class=normal><a href=#__codelineno-12-19>19</a></span>
<span class=normal><a href=#__codelineno-12-20>20</a></span>
<span class=normal><a href=#__codelineno-12-21>21</a></span>
<span class=normal><a href=#__codelineno-12-22>22</a></span>
<span class=normal><a href=#__codelineno-12-23>23</a></span>
<span class=normal><a href=#__codelineno-12-24>24</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;cstdint&gt;</span>
<a id=__codelineno-12-2 name=__codelineno-12-2></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;list&gt;</span>
<a id=__codelineno-12-3 name=__codelineno-12-3></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span>
<a id=__codelineno-12-4 name=__codelineno-12-4></a>
<a id=__codelineno-12-5 name=__codelineno-12-5></a><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<a id=__codelineno-12-6 name=__codelineno-12-6></a><span class=k>using</span><span class=w> </span><span class=n>u64</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>uint64_t</span><span class=p>;</span>
<a id=__codelineno-12-7 name=__codelineno-12-7></a>
<a id=__codelineno-12-8 name=__codelineno-12-8></a><span class=n>vector</span><span class=o>&lt;</span><span class=n>u64</span><span class=o>&gt;</span><span class=w> </span><span class=n>radixSort</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=n>u64</span><span class=o>&gt;</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>lst_c</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-12-9 name=__codelineno-12-9></a><span class=w>    </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>u64</span><span class=o>&gt;</span><span class=w> </span><span class=n>lst</span><span class=p>(</span><span class=n>lst_c</span><span class=p>);</span>
<a id=__codelineno-12-10 name=__codelineno-12-10></a><span class=w>    </span><span class=n>u64</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<a id=__codelineno-12-11 name=__codelineno-12-11></a><span class=w>    </span><span class=k>while</span><span class=p>(</span><span class=o>++</span><span class=n>pos</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>exp</span><span class=w> </span><span class=o>*=</span><span class=w> </span><span class=mi>10</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-12-12 name=__codelineno-12-12></a><span class=w>        </span><span class=n>vector</span><span class=o>&lt;</span><span class=n>list</span><span class=o>&lt;</span><span class=n>u64</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>buc</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
<a id=__codelineno-12-13 name=__codelineno-12-13></a><span class=w>        </span><span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>lst</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-12-14 name=__codelineno-12-14></a><span class=w>            </span><span class=n>buc</span><span class=p>[(</span><span class=n>num</span><span class=o>/</span><span class=p>(</span><span class=n>exp</span><span class=o>/</span><span class=mi>10</span><span class=p>))</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>10</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>num</span><span class=p>);</span>
<a id=__codelineno-12-15 name=__codelineno-12-15></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-12-16 name=__codelineno-12-16></a><span class=w>        </span><span class=n>lst</span><span class=p>.</span><span class=n>clear</span><span class=p>();</span>
<a id=__codelineno-12-17 name=__codelineno-12-17></a><span class=w>        </span><span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>ls</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>buc</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-12-18 name=__codelineno-12-18></a><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>ls</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-12-19 name=__codelineno-12-19></a><span class=w>                </span><span class=n>lst</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>num</span><span class=p>);</span>
<a id=__codelineno-12-20 name=__codelineno-12-20></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-12-21 name=__codelineno-12-21></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-12-22 name=__codelineno-12-22></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-12-23 name=__codelineno-12-23></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>lst</span><span class=p>;</span>
<a id=__codelineno-12-24 name=__codelineno-12-24></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>如果你和我一样之前已经学过其他基于比较的排序方式, 直觉上一定会发现, 基数排序的理论时间复杂度会小很多. 实际上也是, 理论上 <span class=arithmatex>\(O(N\log N) &lt; O(N)\)</span>, 其时间复杂度是线性的. 甚至其空间复杂度也仅有 <span class=arithmatex>\(O(N)\)</span> 级别. 那么, 为什么大部分程序语言使用的排序方式都是快速排序或者混合了多种基于比较的排序呢?</p> <p>虽然理论上基数排序的时间复杂度低于快速排序或者其他混合排序, 但是实际使用与优化中需要考虑 <code>CPU</code> 的缓存机制. 基数排序因为多轮全量扫描机制, 其缓存命中率显著低于快速排序等算法; 再如上面程序实现, 基数排序中我们需要进行多轮的全部数据交换, 实际上的时间常数常常难以忽略, 尤其是在数据量较小的前提下. 更加致命的是, 基数排序很难应用在浮点数情况上, 或者说基数排序只适合用在位数结构上一致的数据. 因此, 在工程实现上, 为了达到一般情况下排序效率的最大化, 我们常常会使用其他排序方式, 而非理论上极快的基数排序.<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup></p> <p>尽管如此, 基数排序的应用仍然相当广泛. 其性能在现代计算机缓存大小与内存带宽大幅度上升后也随之增强, 在如 <code>IP</code> 地址, 哈希值, <code>ID</code> 排序等位数固定的场景上表现相当优秀.<sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup></p> </div> <h4 id=232>2.3.2 多项式乘法<sup id=fnref:5><a class=footnote-ref href=#fn:5>5</a></sup><a class=headerlink href=#232 title="Permanent link">§</a></h4> <p>使用链表完成多项式乘法相当简单. 使用模拟乘法竖式的思路即可.</p> <p>我们顺序地存储 <span class=arithmatex>\(N\)</span> 个二元组, 每个二元组包括系数项与指数项. 每轮需要查找有序链表中是否存有相同的指数项. 如果有, 那么直接将系数项乘法得到的值加到已有的系数项中; 否则遍历到 <code>nullptr</code> 或者当前项的指数项已经大于乘法得到的指数项, 在末尾或者当前项的节点前部插入新节点.</p> <p>具体程序按照上述思路即可完成, 这里不再赘述.</p> <h4 id=233>2.3.3 多重表问题<sup id=fnref:6><a class=footnote-ref href=#fn:6>6</a></sup><a class=headerlink href=#233 title="Permanent link">§</a></h4> <p>书上给出了非常有名的例子, 即简单多重关系问题. 其思想类似于图.</p> <p>我们设一共有 <span class=arithmatex>\(N\)</span> 位学生, 同时有 <span class=arithmatex>\(M\)</span> 个课程, 每个学生最多选择 <span class=arithmatex>\(5\)</span> 种课程, 那么直接使用顺序表需要 <span class=arithmatex>\(M\times N\)</span> 大小的空间, 也就是下图的关系</p> <pre class=mermaid><code>flowchart LR
  %% ====== 标题 ======
  %% （有的渲染器会忽略 title，这里留注释）
  %% 学生 × 课程：朴素顺序表（N×M 布尔矩阵）

  %% ====== 头行：课程 ======
  H0[" "]:::corner --- H1["课程1"]:::colHead --- H2["课程2"]:::colHead --- H3["课程3"]:::colHead --- H4["课程4"]:::colHead --- H5["课程5"]:::colHead --- HM["… 课程M"]:::colHead

  %% ====== 第1行：学生1 ======
  R1["学生1"]:::rowHead --- C11["0"]:::cell0 --- C12["1"]:::cell1 --- C13["0"]:::cell0 --- C14["1"]:::cell1 --- C15["0"]:::cell0 --- C1M["…"]:::cell0

  %% ====== 第2行：学生2 ======
  R2["学生2"]:::rowHead --- C21["1"]:::cell1 --- C22["0"]:::cell0 --- C23["0"]:::cell0 --- C24["1"]:::cell1 --- C25["0"]:::cell0 --- C2M["…"]:::cell0

  %% ====== 第3行：学生3 ======
  R3["学生3"]:::rowHead --- C31["0"]:::cell0 --- C32["1"]:::cell1 --- C33["1"]:::cell1 --- C34["0"]:::cell0 --- C35["0"]:::cell0 --- C3M["…"]:::cell0

  %% ====== 第4行：学生4 ======
  R4["学生4"]:::rowHead --- C41["0"]:::cell0 --- C42["0"]:::cell0 --- C43["1"]:::cell1 --- C44["0"]:::cell0 --- C45["1"]:::cell1 --- C4M["…"]:::cell0

  %% ====== 第N行（占位） ======
  RN["… 学生N"]:::rowHead --- CN1["…"]:::cell0 --- CN2["…"]:::cell0 --- CN3["…"]:::cell0 --- CN4["…"]:::cell0 --- CN5["…"]:::cell0 --- CNM["…"]:::cell0

  %% ====== 图例 ======
  subgraph Legend[图例]
    L0["0：未选"]:::cell0 --- L1["1：已选"]:::cell1
  end


  %% 去掉连线箭头 &amp; 尽量轻量
  linkStyle default stroke:#cfd6e4,stroke-width:1px,opacity:0.6;</code></pre> <p>而链表版本仅需要 <span class=arithmatex>\(5\times N\)</span> 的空间</p> <pre class=mermaid><code>%%{init: {'flowchart': {'curve': 'linear'}}}%%
flowchart LR
  %% ================= 顶部课程表头（与原版一致） =================
  H0[" "]:::corner --- H1["课程1"]:::colHead --- H2["课程2"]:::colHead --- H3["课程3"]:::colHead --- H4["课程4"]:::colHead --- H5["课程5"]:::colHead --- HM["… 课程M"]:::colHead

  %% ================= 左侧学生行头（与原版一致） =================
  subgraph ROWS[ ]
  direction TB
  R1["学生1"]:::rowHead
  R2["学生2"]:::rowHead
  R3["学生3"]:::rowHead
  R4["学生4"]:::rowHead
  RN["… 学生N"]:::rowHead
  end

  %% ================= 列：只放 “1” 的结点，形成课程向下链 =================
  %% 列1（H1）：(2,1)
  subgraph COL1[ ]
  direction TB
  H1 --&gt; C21["C21 (2,1)"]:::rel
  end

  %% 列2（H2）：(1,2) -&gt; (3,2)
  subgraph COL2[ ]
  direction TB
  H2 --&gt; C12["C12 (1,2)"]:::rel --&gt; C32["C32 (3,2)"]:::rel
  end

  %% 列3（H3）：(3,3) -&gt; (4,3)
  subgraph COL3[ ]
  direction TB
  H3 --&gt; C33["C33 (3,3)"]:::rel --&gt; C43["C43 (4,3)"]:::rel
  end

  %% 列4（H4）：(1,4) -&gt; (2,4)
  subgraph COL4[ ]
  direction TB
  H4 --&gt; C14["C14 (1,4)"]:::rel --&gt; C24["C24 (2,4)"]:::rel
  end

  %% 列5（H5）：(4,5)
  subgraph COL5[ ]
  direction TB
  H5 --&gt; C45["C45 (4,5)"]:::rel
  end

  %% ================= 行：学生链，用虚线把同一行的“1”连起来 =================
  R1 -. 学生next .-&gt; C12 -. 学生next .-&gt; C14
  R2 -. 学生next .-&gt; C21 -. 学生next .-&gt; C24
  R3 -. 学生next .-&gt; C32 -. 学生next .-&gt; C33
  R4 -. 学生next .-&gt; C43 -. 学生next .-&gt; C45

  %% ================= 图例 =================
  subgraph Legend[图例]
  direction TB
  Lrel["关系结点 (i,j) ：选了该课程"]:::rel
  Lr["虚线：行指针 right（同一学生的下一门课）"]:::legend
  Lc["实线：列指针 down（同一课程的下一个学生）"]:::legend
  end

  %% ================= 样式 =================
  linkStyle default stroke:#cfd6e4,stroke-width:1px,opacity:0.65;</code></pre> <p>唯一的缺点是不方便直接访问某个学生或者课程情况. 不过可以通过额外构建元数据表实现这一点.</p> <h2 id=3-stack>3. 栈(Stack)<a class=headerlink href=#3-stack title="Permanent link">§</a></h2> <hr> <h3 id=31>3.1 栈的实现<a class=headerlink href=#31 title="Permanent link">§</a></h3> <p>栈的实现方式多种多样. 其特点是 <code>FILO(First In Last Out)</code>, 也就是先进后出, 类似于鸡尾酒, 冰激凌的唯一出口式模型. </p> <p>一般而言, 我们只能获取栈顶的元素, 并且只能对栈顶元素进行操作. 或者说栈顶元素是唯一可见元素. 下图是一个栈的示意图</p> <pre class=mermaid><code>flowchart LR
  %% styles (safe &amp; compatible)
  classDef empty   fill:stroke-width:1px,rx:6,ry:6;
  classDef filled  fill:stroke-width:1.5px,rx:6,ry:6;
  classDef top     fill:stroke-width:2px,rx:8,ry:8;
  classDef base    fill:stroke-dasharray:4 3,rx:6,ry:6;
  classDef pointer fill:stroke-width:1.5px,rx:6,ry:6;

  %% vertical stack (capacity = 10)
  S7["S[7]  empty"]:::empty
  S6["S[6]  empty"]:::empty
  S5["S[5]  empty"]:::empty
  S4["S[4]  empty"]:::empty
  S3["S[3]  C"]:::top
  S2["S[2]  B"]:::filled
  S1["S[1]  A"]:::filled
  S0["S[0]  bottom"]:::base

  %% invisible connectors to make cells touch vertically (not a linked list)
  S7 --- S6
  S6 --- S5
  S5 --- S4
  S4 --- S3
  S3 --- S2
  S2 --- S1
  S1 --- S0

  Top["top = 3"]:::pointer --&gt; S3

  %% hide the vertical connectors (keep only the Top-&gt;S3 arrow visible)
</code></pre> <p>栈的基本操作包括 <code>Top</code>(检查栈顶), <code>Push</code>(将元素放入栈顶), <code>Pop</code>(取出栈顶元素), 只需要将前面的链表进行简单改造即可. 具体而言, 只需保留这几项操作, 删除其他操作即可.</p> <p>但是, 使用链表的代价是极其可怕的, 因为对于堆空间(动态内存)的开辟需要花费大量的常数时间. 因此, 更加常见的方式是直接使用普通数组, 也就是线性表构建. 这种方式的优点是避开了时间代价高昂的动态内存, 缺点是事先需要确定适合的数组大小, 容易造成严重的内存安全隐患.</p> <p>这里给出最简单的栈实现</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1> 1</a></span>
<span class=normal><a href=#__codelineno-13-2> 2</a></span>
<span class=normal><a href=#__codelineno-13-3> 3</a></span>
<span class=normal><a href=#__codelineno-13-4> 4</a></span>
<span class=normal><a href=#__codelineno-13-5> 5</a></span>
<span class=normal><a href=#__codelineno-13-6> 6</a></span>
<span class=normal><a href=#__codelineno-13-7> 7</a></span>
<span class=normal><a href=#__codelineno-13-8> 8</a></span>
<span class=normal><a href=#__codelineno-13-9> 9</a></span>
<span class=normal><a href=#__codelineno-13-10>10</a></span>
<span class=normal><a href=#__codelineno-13-11>11</a></span>
<span class=normal><a href=#__codelineno-13-12>12</a></span>
<span class=normal><a href=#__codelineno-13-13>13</a></span>
<span class=normal><a href=#__codelineno-13-14>14</a></span>
<span class=normal><a href=#__codelineno-13-15>15</a></span>
<span class=normal><a href=#__codelineno-13-16>16</a></span>
<span class=normal><a href=#__codelineno-13-17>17</a></span>
<span class=normal><a href=#__codelineno-13-18>18</a></span>
<span class=normal><a href=#__codelineno-13-19>19</a></span>
<span class=normal><a href=#__codelineno-13-20>20</a></span>
<span class=normal><a href=#__codelineno-13-21>21</a></span>
<span class=normal><a href=#__codelineno-13-22>22</a></span>
<span class=normal><a href=#__codelineno-13-23>23</a></span>
<span class=normal><a href=#__codelineno-13-24>24</a></span>
<span class=normal><a href=#__codelineno-13-25>25</a></span>
<span class=normal><a href=#__codelineno-13-26>26</a></span>
<span class=normal><a href=#__codelineno-13-27>27</a></span>
<span class=normal><a href=#__codelineno-13-28>28</a></span>
<span class=normal><a href=#__codelineno-13-29>29</a></span>
<span class=normal><a href=#__codelineno-13-30>30</a></span>
<span class=normal><a href=#__codelineno-13-31>31</a></span>
<span class=normal><a href=#__codelineno-13-32>32</a></span>
<span class=normal><a href=#__codelineno-13-33>33</a></span>
<span class=normal><a href=#__codelineno-13-34>34</a></span>
<span class=normal><a href=#__codelineno-13-35>35</a></span>
<span class=normal><a href=#__codelineno-13-36>36</a></span>
<span class=normal><a href=#__codelineno-13-37>37</a></span>
<span class=normal><a href=#__codelineno-13-38>38</a></span>
<span class=normal><a href=#__codelineno-13-39>39</a></span>
<span class=normal><a href=#__codelineno-13-40>40</a></span>
<span class=normal><a href=#__codelineno-13-41>41</a></span>
<span class=normal><a href=#__codelineno-13-42>42</a></span>
<span class=normal><a href=#__codelineno-13-43>43</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;cstddef&gt;</span>
<a id=__codelineno-13-2 name=__codelineno-13-2></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
<a id=__codelineno-13-3 name=__codelineno-13-3></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdexcept&gt;</span>
<a id=__codelineno-13-4 name=__codelineno-13-4></a>
<a id=__codelineno-13-5 name=__codelineno-13-5></a><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<a id=__codelineno-13-6 name=__codelineno-13-6></a>
<a id=__codelineno-13-7 name=__codelineno-13-7></a><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>typename</span><span class=w> </span><span class=nc>T</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>N</span><span class=o>&gt;</span>
<a id=__codelineno-13-8 name=__codelineno-13-8></a><span class=k>class</span><span class=w> </span><span class=nc>Stack</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-9 name=__codelineno-13-9></a><span class=w>   </span><span class=k>private</span><span class=o>:</span>
<a id=__codelineno-13-10 name=__codelineno-13-10></a><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>top_ptr</span><span class=p>;</span>
<a id=__codelineno-13-11 name=__codelineno-13-11></a><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=n>array</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<a id=__codelineno-13-12 name=__codelineno-13-12></a>
<a id=__codelineno-13-13 name=__codelineno-13-13></a><span class=w>   </span><span class=k>public</span><span class=o>:</span>
<a id=__codelineno-13-14 name=__codelineno-13-14></a><span class=w>    </span><span class=n>Stack</span><span class=p>()</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>top_ptr</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-13-15 name=__codelineno-13-15></a><span class=w>    </span><span class=c1>// 使用的是栈空间, 不需要额外的析构函数</span>
<a id=__codelineno-13-16 name=__codelineno-13-16></a>
<a id=__codelineno-13-17 name=__codelineno-13-17></a><span class=w>    </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=n>top</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-18 name=__codelineno-13-18></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>top_ptr</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-19 name=__codelineno-13-19></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>array</span><span class=p>[</span><span class=n>top_ptr</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>];</span>
<a id=__codelineno-13-20 name=__codelineno-13-20></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-13-21 name=__codelineno-13-21></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>runtime_error</span><span class=p>(</span><span class=s>"Stack is empty!"</span><span class=p>);</span>
<a id=__codelineno-13-22 name=__codelineno-13-22></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-13-23 name=__codelineno-13-23></a>
<a id=__codelineno-13-24 name=__codelineno-13-24></a><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>top</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-25 name=__codelineno-13-25></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>top_ptr</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-26 name=__codelineno-13-26></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>array</span><span class=p>[</span><span class=n>top_ptr</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>];</span>
<a id=__codelineno-13-27 name=__codelineno-13-27></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-13-28 name=__codelineno-13-28></a><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>runtime_error</span><span class=p>(</span><span class=s>"Stack is empty!"</span><span class=p>);</span>
<a id=__codelineno-13-29 name=__codelineno-13-29></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-13-30 name=__codelineno-13-30></a>
<a id=__codelineno-13-31 name=__codelineno-13-31></a><span class=w>    </span><span class=c1>// 这里没有体现边界检查与扩容. 实际上的习惯是会添加 is_full 和 is_empty 两个函数专门辅助边界检查.</span>
<a id=__codelineno-13-32 name=__codelineno-13-32></a><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>push</span><span class=p>(</span><span class=n>T</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>num</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>array</span><span class=p>[</span><span class=o>++</span><span class=n>top_ptr</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>num</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-13-33 name=__codelineno-13-33></a><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=n>pop</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>array</span><span class=p>[</span><span class=n>top_ptr</span><span class=o>--</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>];</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-13-34 name=__codelineno-13-34></a><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=k>noexcept</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>top_ptr</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-13-35 name=__codelineno-13-35></a><span class=p>};</span>
<a id=__codelineno-13-36 name=__codelineno-13-36></a>
<a id=__codelineno-13-37 name=__codelineno-13-37></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-38 name=__codelineno-13-38></a><span class=w>    </span><span class=n>Stack</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=w> </span><span class=mi>1000</span><span class=o>&gt;</span><span class=w> </span><span class=n>stack</span><span class=p>;</span>
<a id=__codelineno-13-39 name=__codelineno-13-39></a><span class=w>    </span><span class=n>stack</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=mi>100</span><span class=p>);</span>
<a id=__codelineno-13-40 name=__codelineno-13-40></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>stack</span><span class=p>.</span><span class=n>pop</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>" "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>stack</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-13-41 name=__codelineno-13-41></a>
<a id=__codelineno-13-42 name=__codelineno-13-42></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-13-43 name=__codelineno-13-43></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <p>使用动态内存实现同样是可行的, 甚至更加灵活. 不过在那种情况下许多操作甚至栈本身我们可以直接使用标准库的 <code>vector</code> 完成, 因此这里不给出动态内存的方式.</p> <h3 id=32>3.2 栈的应用<a class=headerlink href=#32 title="Permanent link">§</a></h3> <h4 id=321>3.2.1 符号平衡(符号语法检查)<sup id=fnref:7><a class=footnote-ref href=#fn:7>7</a></sup><a class=headerlink href=#321 title="Permanent link">§</a></h4> <p>我们写程序的时候, 尤其是诸如 <code>lisp</code> 那样包含巨量恐怖括号的程序时, 我们需要检查括号是否闭合. 这是一件十分重要的事, 因为一旦括号未闭合, 缺少专门的符号平衡解析器的情况下很容易产生几百上千行程序代码的报错. 我们可以引入栈解决这一问题.</p> <p>我们将一对括号分为开放和闭合两类, 其中一对括号的左边部分就是开放的, 右边部分就是闭合的. 每当遇到开放符号的时候就将符号记录到栈顶, 而每当遇到闭合符号的时候就检查是否与栈顶元素相同. 如果栈顶元素根本不存在, 报错缺少左括号. 如果不同, 那么就产生配对错误的报错. 如果相同, 那么就将栈顶符号推出, 栈顶移到下一符号. 在文末如果栈中还残留有元素, 证明前面有括号未闭合(这意味着我们需要存入的不仅仅是元素本身, 还需要存储元素的位置), 此时执行报错.</p> <p>符号平衡算法是很经典的<strong>在线(on-line)算法</strong>, 因为它不需要读完整个文本就可以直接检查到最前面的符号不配对问题.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p><strong>在线算法</strong> 指的是可以流式处理数据的算法. 准确的讲, 在输入数据 <strong>逐步到达</strong> 的过程中, 算法能 <strong>实时处理</strong>, 并在任何时刻给出当前处理结果, 而不需要等待全部输入都到齐的算法就是在线算法.</p> <p><strong>离线算法</strong> 指的是必须等到 <strong>完整输入数据</strong> 都准备好之后才能开始计算的算法.</p> </div> <p>下面是对于符号平衡算法的实现. 当然, 诸如 <code>gcc</code> 等编译器的语法解析的符号平衡算法远没有这么简单. 简单来讲, 下面这个程序源代码本身的符号平衡就会被这个算法识别为"非法". 大家可以猜猜是哪里, 是为什么, 然后自己编译试试</p> <div class=highlight><table class=highlighttable><tbody><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-14-1> 1</a></span>
<span class=normal><a href=#__codelineno-14-2> 2</a></span>
<span class=normal><a href=#__codelineno-14-3> 3</a></span>
<span class=normal><a href=#__codelineno-14-4> 4</a></span>
<span class=normal><a href=#__codelineno-14-5> 5</a></span>
<span class=normal><a href=#__codelineno-14-6> 6</a></span>
<span class=normal><a href=#__codelineno-14-7> 7</a></span>
<span class=normal><a href=#__codelineno-14-8> 8</a></span>
<span class=normal><a href=#__codelineno-14-9> 9</a></span>
<span class=normal><a href=#__codelineno-14-10>10</a></span>
<span class=normal><a href=#__codelineno-14-11>11</a></span>
<span class=normal><a href=#__codelineno-14-12>12</a></span>
<span class=normal><a href=#__codelineno-14-13>13</a></span>
<span class=normal><a href=#__codelineno-14-14>14</a></span>
<span class=normal><a href=#__codelineno-14-15>15</a></span>
<span class=normal><a href=#__codelineno-14-16>16</a></span>
<span class=normal><a href=#__codelineno-14-17>17</a></span>
<span class=normal><a href=#__codelineno-14-18>18</a></span>
<span class=normal><a href=#__codelineno-14-19>19</a></span>
<span class=normal><a href=#__codelineno-14-20>20</a></span>
<span class=normal><a href=#__codelineno-14-21>21</a></span>
<span class=normal><a href=#__codelineno-14-22>22</a></span>
<span class=normal><a href=#__codelineno-14-23>23</a></span>
<span class=normal><a href=#__codelineno-14-24>24</a></span>
<span class=normal><a href=#__codelineno-14-25>25</a></span>
<span class=normal><a href=#__codelineno-14-26>26</a></span>
<span class=normal><a href=#__codelineno-14-27>27</a></span>
<span class=normal><a href=#__codelineno-14-28>28</a></span>
<span class=normal><a href=#__codelineno-14-29>29</a></span>
<span class=normal><a href=#__codelineno-14-30>30</a></span>
<span class=normal><a href=#__codelineno-14-31>31</a></span>
<span class=normal><a href=#__codelineno-14-32>32</a></span>
<span class=normal><a href=#__codelineno-14-33>33</a></span>
<span class=normal><a href=#__codelineno-14-34>34</a></span>
<span class=normal><a href=#__codelineno-14-35>35</a></span>
<span class=normal><a href=#__codelineno-14-36>36</a></span>
<span class=normal><a href=#__codelineno-14-37>37</a></span>
<span class=normal><a href=#__codelineno-14-38>38</a></span>
<span class=normal><a href=#__codelineno-14-39>39</a></span>
<span class=normal><a href=#__codelineno-14-40>40</a></span>
<span class=normal><a href=#__codelineno-14-41>41</a></span>
<span class=normal><a href=#__codelineno-14-42>42</a></span>
<span class=normal><a href=#__codelineno-14-43>43</a></span>
<span class=normal><a href=#__codelineno-14-44>44</a></span>
<span class=normal><a href=#__codelineno-14-45>45</a></span>
<span class=normal><a href=#__codelineno-14-46>46</a></span>
<span class=normal><a href=#__codelineno-14-47>47</a></span>
<span class=normal><a href=#__codelineno-14-48>48</a></span>
<span class=normal><a href=#__codelineno-14-49>49</a></span>
<span class=normal><a href=#__codelineno-14-50>50</a></span>
<span class=normal><a href=#__codelineno-14-51>51</a></span>
<span class=normal><a href=#__codelineno-14-52>52</a></span>
<span class=normal><a href=#__codelineno-14-53>53</a></span>
<span class=normal><a href=#__codelineno-14-54>54</a></span>
<span class=normal><a href=#__codelineno-14-55>55</a></span>
<span class=normal><a href=#__codelineno-14-56>56</a></span>
<span class=normal><a href=#__codelineno-14-57>57</a></span>
<span class=normal><a href=#__codelineno-14-58>58</a></span>
<span class=normal><a href=#__codelineno-14-59>59</a></span>
<span class=normal><a href=#__codelineno-14-60>60</a></span>
<span class=normal><a href=#__codelineno-14-61>61</a></span>
<span class=normal><a href=#__codelineno-14-62>62</a></span>
<span class=normal><a href=#__codelineno-14-63>63</a></span>
<span class=normal><a href=#__codelineno-14-64>64</a></span>
<span class=normal><a href=#__codelineno-14-65>65</a></span>
<span class=normal><a href=#__codelineno-14-66>66</a></span>
<span class=normal><a href=#__codelineno-14-67>67</a></span>
<span class=normal><a href=#__codelineno-14-68>68</a></span>
<span class=normal><a href=#__codelineno-14-69>69</a></span>
<span class=normal><a href=#__codelineno-14-70>70</a></span>
<span class=normal><a href=#__codelineno-14-71>71</a></span>
<span class=normal><a href=#__codelineno-14-72>72</a></span>
<span class=normal><a href=#__codelineno-14-73>73</a></span>
<span class=normal><a href=#__codelineno-14-74>74</a></span>
<span class=normal><a href=#__codelineno-14-75>75</a></span>
<span class=normal><a href=#__codelineno-14-76>76</a></span>
<span class=normal><a href=#__codelineno-14-77>77</a></span>
<span class=normal><a href=#__codelineno-14-78>78</a></span>
<span class=normal><a href=#__codelineno-14-79>79</a></span>
<span class=normal><a href=#__codelineno-14-80>80</a></span>
<span class=normal><a href=#__codelineno-14-81>81</a></span>
<span class=normal><a href=#__codelineno-14-82>82</a></span>
<span class=normal><a href=#__codelineno-14-83>83</a></span>
<span class=normal><a href=#__codelineno-14-84>84</a></span>
<span class=normal><a href=#__codelineno-14-85>85</a></span>
<span class=normal><a href=#__codelineno-14-86>86</a></span>
<span class=normal><a href=#__codelineno-14-87>87</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;cstddef&gt;</span>
<a id=__codelineno-14-2 name=__codelineno-14-2></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;fstream&gt;</span>
<a id=__codelineno-14-3 name=__codelineno-14-3></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
<a id=__codelineno-14-4 name=__codelineno-14-4></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stack&gt;</span>
<a id=__codelineno-14-5 name=__codelineno-14-5></a><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
<a id=__codelineno-14-6 name=__codelineno-14-6></a>
<a id=__codelineno-14-7 name=__codelineno-14-7></a><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<a id=__codelineno-14-8 name=__codelineno-14-8></a>
<a id=__codelineno-14-9 name=__codelineno-14-9></a><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>argc</span><span class=p>,</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=k>const</span><span class=o>*</span><span class=w> </span><span class=n>argv</span><span class=p>[])</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-10 name=__codelineno-14-10></a><span class=w>    </span><span class=c1>// 其中另一个参数 argv[1] 指向需要检查语法的文件地址</span>
<a id=__codelineno-14-11 name=__codelineno-14-11></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>argc</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-12 name=__codelineno-14-12></a><span class=w>        </span><span class=n>cerr</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Input type is undefined"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-14-13 name=__codelineno-14-13></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<a id=__codelineno-14-14 name=__codelineno-14-14></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-14-15 name=__codelineno-14-15></a>
<a id=__codelineno-14-16 name=__codelineno-14-16></a><span class=w>    </span><span class=n>ifstream</span><span class=w> </span><span class=n>inFile</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]);</span>
<a id=__codelineno-14-17 name=__codelineno-14-17></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>leftLst</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"([{"</span><span class=p>,</span><span class=w> </span><span class=n>righLst</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>")]}"</span><span class=p>;</span>
<a id=__codelineno-14-18 name=__codelineno-14-18></a>
<a id=__codelineno-14-19 name=__codelineno-14-19></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>inFile</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-20 name=__codelineno-14-20></a><span class=w>        </span><span class=n>cerr</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"No such file: "</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-14-21 name=__codelineno-14-21></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<a id=__codelineno-14-22 name=__codelineno-14-22></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-14-23 name=__codelineno-14-23></a>
<a id=__codelineno-14-24 name=__codelineno-14-24></a><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>line</span><span class=p>;</span>
<a id=__codelineno-14-25 name=__codelineno-14-25></a><span class=w>    </span><span class=n>stack</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>size_t</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>size_t</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=o>&gt;&gt;&gt;</span><span class=w> </span><span class=n>lineRead</span><span class=p>;</span>
<a id=__codelineno-14-26 name=__codelineno-14-26></a><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>lineNum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-14-27 name=__codelineno-14-27></a>
<a id=__codelineno-14-28 name=__codelineno-14-28></a><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>getline</span><span class=p>(</span><span class=n>inFile</span><span class=p>,</span><span class=w> </span><span class=n>line</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=o>++</span><span class=n>lineNum</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-29 name=__codelineno-14-29></a><span class=w>        </span><span class=kt>size_t</span><span class=w> </span><span class=n>rowNum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-14-30 name=__codelineno-14-30></a>
<a id=__codelineno-14-31 name=__codelineno-14-31></a><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>char</span><span class=w> </span><span class=k>const</span><span class=o>&amp;</span><span class=w> </span><span class=n>ch</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>line</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-32 name=__codelineno-14-32></a><span class=w>            </span><span class=o>++</span><span class=n>rowNum</span><span class=p>;</span>
<a id=__codelineno-14-33 name=__codelineno-14-33></a>
<a id=__codelineno-14-34 name=__codelineno-14-34></a><span class=w>            </span><span class=c1>// bool handled = false;</span>
<a id=__codelineno-14-35 name=__codelineno-14-35></a>
<a id=__codelineno-14-36 name=__codelineno-14-36></a><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>ptr_ex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>ptr_ex</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>leftLst</span><span class=p>.</span><span class=n>size</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>ptr_ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-37 name=__codelineno-14-37></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ch</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>leftLst</span><span class=p>[</span><span class=n>ptr_ex</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-38 name=__codelineno-14-38></a><span class=w>                    </span><span class=n>lineRead</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>ptr_ex</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=n>lineNum</span><span class=p>,</span><span class=w> </span><span class=n>rowNum</span><span class=p>}});</span>
<a id=__codelineno-14-39 name=__codelineno-14-39></a><span class=w>                    </span><span class=c1>// handled = true;</span>
<a id=__codelineno-14-40 name=__codelineno-14-40></a><span class=w>                    </span><span class=c1>// goto 就是简单的跳转执行, 用来取代上面的 handled 标注</span>
<a id=__codelineno-14-41 name=__codelineno-14-41></a><span class=w>                    </span><span class=k>goto</span><span class=w> </span><span class=n>next_turn</span><span class=p>;</span>
<a id=__codelineno-14-42 name=__codelineno-14-42></a><span class=w>                    </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-14-43 name=__codelineno-14-43></a><span class=w>                </span><span class=p>}</span>
<a id=__codelineno-14-44 name=__codelineno-14-44></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-14-45 name=__codelineno-14-45></a>
<a id=__codelineno-14-46 name=__codelineno-14-46></a><span class=w>            </span><span class=c1>// if (handled == true) continue;</span>
<a id=__codelineno-14-47 name=__codelineno-14-47></a>
<a id=__codelineno-14-48 name=__codelineno-14-48></a><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>size_t</span><span class=w> </span><span class=n>ptr_ex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>ptr_ex</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>righLst</span><span class=p>.</span><span class=n>size</span><span class=p>();</span><span class=w> </span><span class=o>++</span><span class=n>ptr_ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-49 name=__codelineno-14-49></a><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ch</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>righLst</span><span class=p>[</span><span class=n>ptr_ex</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-50 name=__codelineno-14-50></a><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lineRead</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nb>true</span><span class=w> </span><span class=o>||</span>
<a id=__codelineno-14-51 name=__codelineno-14-51></a><span class=w>                        </span><span class=n>lineRead</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>first</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>ptr_ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-52 name=__codelineno-14-52></a><span class=w>                        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Unpaired symbol detected</span><span class=se>\n</span><span class=s>"</span>
<a id=__codelineno-14-53 name=__codelineno-14-53></a><span class=w>                             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"In [line, row] -&gt; ["</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>lineNum</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>", "</span>
<a id=__codelineno-14-54 name=__codelineno-14-54></a><span class=w>                             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>rowNum</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"]: unpaired symbol `"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>ch</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"`"</span>
<a id=__codelineno-14-55 name=__codelineno-14-55></a><span class=w>                             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-14-56 name=__codelineno-14-56></a>
<a id=__codelineno-14-57 name=__codelineno-14-57></a><span class=w>                        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lineRead</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nb>false</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-58 name=__codelineno-14-58></a><span class=w>                            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Expected symbol: "</span>
<a id=__codelineno-14-59 name=__codelineno-14-59></a><span class=w>                                 </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>righLst</span><span class=p>[</span><span class=n>lineRead</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>first</span><span class=p>]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-14-60 name=__codelineno-14-60></a><span class=w>                        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-61 name=__codelineno-14-61></a><span class=w>                            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"No left symbol found."</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-14-62 name=__codelineno-14-62></a><span class=w>                        </span><span class=p>}</span>
<a id=__codelineno-14-63 name=__codelineno-14-63></a><span class=w>                        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-14-64 name=__codelineno-14-64></a><span class=w>                    </span><span class=p>}</span>
<a id=__codelineno-14-65 name=__codelineno-14-65></a>
<a id=__codelineno-14-66 name=__codelineno-14-66></a><span class=w>                    </span><span class=n>lineRead</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
<a id=__codelineno-14-67 name=__codelineno-14-67></a><span class=w>                    </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-14-68 name=__codelineno-14-68></a><span class=w>                </span><span class=p>}</span>
<a id=__codelineno-14-69 name=__codelineno-14-69></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-14-70 name=__codelineno-14-70></a>
<a id=__codelineno-14-71 name=__codelineno-14-71></a><span class=w>        </span><span class=nl>next_turn</span><span class=p>:;</span>
<a id=__codelineno-14-72 name=__codelineno-14-72></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-14-73 name=__codelineno-14-73></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-14-74 name=__codelineno-14-74></a>
<a id=__codelineno-14-75 name=__codelineno-14-75></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lineRead</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=nb>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-76 name=__codelineno-14-76></a><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"Unpaired symbol detected</span><span class=se>\n</span><span class=s>"</span>
<a id=__codelineno-14-77 name=__codelineno-14-77></a><span class=w>             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"In [line, row] -&gt; ["</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>lineRead</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>second</span><span class=p>.</span><span class=n>first</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>", "</span>
<a id=__codelineno-14-78 name=__codelineno-14-78></a><span class=w>             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>lineRead</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>second</span><span class=p>.</span><span class=n>second</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"]: unpaired symbol `"</span>
<a id=__codelineno-14-79 name=__codelineno-14-79></a><span class=w>             </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>leftLst</span><span class=p>[</span><span class=n>lineRead</span><span class=p>.</span><span class=n>top</span><span class=p>().</span><span class=n>first</span><span class=p>]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"`"</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-14-80 name=__codelineno-14-80></a>
<a id=__codelineno-14-81 name=__codelineno-14-81></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-14-82 name=__codelineno-14-82></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-14-83 name=__codelineno-14-83></a>
<a id=__codelineno-14-84 name=__codelineno-14-84></a><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>"No error found."</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
<a id=__codelineno-14-85 name=__codelineno-14-85></a>
<a id=__codelineno-14-86 name=__codelineno-14-86></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<a id=__codelineno-14-87 name=__codelineno-14-87></a><span class=p>}</span>
</code></pre></div></td></tr></tbody></table></div> <h4 id=322>3.2.2 从中缀表达式到后缀表达式<sup id=fnref:8><a class=footnote-ref href=#fn:8>8</a></sup><a class=headerlink href=#322 title="Permanent link">§</a></h4> <p>对于一个乘法与加法混合问题: <span class=arithmatex>\(4 \times 2 + 3 + 5 \times (8+9) = ?\)</span>, 我们如何使用程序语言完成计算?</p> <p>相信不少同学在学习算法与数据结构基础之前就听说过, 单纯的利用程序语言已有的计算规则设计计算器并不困难, 但是要自己不利用程序语言内置的计算规则自行进行解析并不是一件简单的事. 事实上, 利用栈就可以做到这一点.</p> <p>最直观的解析思路如下. 我们只考虑加减乘除四则运算和括号, 那么运算优先级有: 括号 <span class=arithmatex>\(&gt;\)</span> 乘除 <span class=arithmatex>\(&gt;\)</span> 加减. 因此, 我们可以将上述表达式按照<strong>括号</strong> <span class=arithmatex>\(\longrightarrow\)</span> <strong>乘除</strong> <span class=arithmatex>\(\longrightarrow\)</span> <strong>加减</strong>的顺序进行解析, 也就是:</p> <div class=arithmatex>\[ \begin{align*} =&amp;4\times2+3+5\times(8,9,+)\\ =&amp;(4,2,\times)+3+(5,(8,9,+),\times)\\ =&amp;((4,2,\times),3,+)+(5,(8,9,+),\times)=(((4,2,\times),3,+),(5,(8,9,+),\times),+) \end{align*} \]</div> <p>接下来就是见证奇迹的时刻! 打开括号, 我们得到这样一串表达式: <span class=arithmatex>\(4,2,\times,3,+,5,8,9,+\times,+\)</span>. 这其实就是<strong>逆波兰表达式</strong>, 亦称<strong>后缀表达式</strong>. 现在我们按照如下思路进行计算.</p> <p>我们规定, 每当读到后缀表达式的数字时将数字推送到栈顶, 每当读到符号时将栈顶弹出两次(也就是栈顶元素和栈顶下一个元素), 并直接对这两个数按照运算符完成运算, 将得到的结果重新放回栈顶. 比如, 一开始的时候读到 <span class=arithmatex>\(4\)</span>, 将 <span class=arithmatex>\(4\)</span> 入栈; 接着读到 <span class=arithmatex>\(2\)</span>, 入栈; 而后读到 <span class=arithmatex>\(\times\)</span>, 将 <span class=arithmatex>\(4\)</span> 和 <span class=arithmatex>\(2\)</span> 都弹出栈再相乘得到 <span class=arithmatex>\(8\)</span>, 而后将 <span class=arithmatex>\(8\)</span> 送回栈顶, 接下来持续进行相同操作. 具体计算如下(<span class=arithmatex>\(ST\)</span> 表示栈, <span class=arithmatex>\(OP\)</span> 表示当前读到的运算符, <span class=arithmatex>\(RES\)</span> 表示计算结果)</p> <div class=arithmatex>\[ \begin{align*} ST&amp;=\{4\}\\ ST&amp;=\{4,2\}\\ ST&amp;=\{4,2\},\ OP=\times\longrightarrow ST=\{\},RES=4\times2=8\longrightarrow ST=\{8\}\\ ST&amp;=\{8,3\}\\ ST&amp;=\{8,3\},\ OP=+,\longrightarrow ST=\{\}, RES=8+3=11\longrightarrow ST=\{11\}\\ ST&amp;=\{11,5\}\\ ST&amp;=\{11,5,8\}\\ ST&amp;=\{11,5,8,9\}\\ ST&amp;=\{11,5,8,9\},\ OP=+,\longrightarrow ST=\{11,5\},RES=8+9=17\longrightarrow ST=\{11,5,17\}\\ ST&amp;=\{11,5,17\},\ OP=\times,\longrightarrow ST=\{11\},RES=5\times17=85\longrightarrow ST=\{11,85\}\\ ST&amp;=\{11,85\},\ OP=+,\longrightarrow ST=\{\},RES=11+85=96\longrightarrow ST=\{96\}\\ \end{align*} \]</div> <p>最终栈留下的唯一元素 <span class=arithmatex>\(96\)</span> 就是运算答案.</p> <p>很神奇不是吗? 可是, 这为什么是对的呢? 为什么后缀表达式可以直接"打开括号", 而中缀表达式不可以呢? 实际上, 后缀表达式只是将括号, 或者说运算顺序直接写在了表达式中, 上面的操作就是对这一新表达式计算规则的描述. 换句话说, 我们将运算规则复杂的中缀表达式归纳解析成了运算规则唯一确定简单的后缀表达式.</p> <p>如果使用树结构中节点之间的关系来表达, 那么我们这一展开过程和二叉树无异. 我们考虑下面这棵树</p> <pre class=mermaid><code>graph TD
    TOP["Operator"] --&gt; BOT1["S1"]
    TOP --&gt; BOT2["S2"]</code></pre> <p>其中 <span class=arithmatex>\(S_1\)</span> 和 <span class=arithmatex>\(S_2\)</span> 分别是左节点和右节点. 那么这个运算过程就是 <span class=arithmatex>\(S_1\ S_2\ Operator\)</span>. 实际上 <span class=arithmatex>\(S_1\)</span> 对其下面的左节点与右节点执行操作与 <span class=arithmatex>\(S_1\ S_2\ Operator\)</span> 方式没有区别, 并且仍然严格保证从左到右三元唯一匹配格式. 使用实例进行更加明确的解释, 即逐步构造树:</p> <p>首先生成这样一棵树. 使用后缀表达式表述为 <span class=arithmatex>\((4\times2+3,5\times(8+9),+)=(4\times2+3)\ (5\times(8+9))\ +\)</span>.</p> <pre class=mermaid><code>graph TD
    TOP["\+"] --&gt; BOT1l["4 * 2 \+ 3"]
    TOP --&gt; BOT1r["5 * (8 \+ 9)"]</code></pre> <p>接下来继续生成左子树和右子树</p> <pre class=mermaid><code>graph TD
    TOP["\+"] --&gt; BOT1["4 * 2"]
    TOP --&gt; BOT2["3"]

    TO["\*"] --&gt; BO1["5"]
    TO --&gt; BO2["8+9"]</code></pre> <p>因此上面的表达式进一步变为 <span class=arithmatex>\((4\times 2)\ (3)\ +\ (5)\ (8+9)\ +\)</span>. 在这一步, 你会发现, 每次展开就是严格的三元组: 父节点-左子结点-右子节点. 换句话说, 这个三元唯一匹配不是因为其他任何原因, 就是源自于展开的树以及树的来源严格遵循运算规则的中缀表达式. 因为二叉树本身的三元匹配唯一完整, 并且树本身包含了运算顺序(运算规则), 因此后缀表达式的确是没有问题的. 这也同时说明, 利用后缀表达式 + 栈进行计算本质上和利用二叉树解析中缀表达式进行递归计算是一致的. 后缀表达式就是把整棵表达式树按<strong>后序遍历</strong>写成一行, 同时避免了会占用大量空间的直接解析中缀表达式造成的递归调用.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p><strong>后序遍历</strong> 将树的三个节点按照 <span class=arithmatex>\(S_1\longrightarrow S_2\longrightarrow Operator\)</span> (左子结点 右子节点 父节点)的顺序将整棵树遍历为唯一表达式的方法. 具体规则可以参考: <a href=https://zh.wikipedia.org/wiki/%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86#%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86>https://zh.wikipedia.org/wiki/%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86#%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86</a></p> </div> <p>如前面所述, 我们发现构造出树状结构之后转化为后缀表达式只需要进行后序遍历. 我们完全可以如此考虑, 即中缀表达式本来就是一棵树, 不需要括号就确定了运算顺序. 我们自然没有必要再添加一遍括号. 换句话说, 我们可以考虑, 是否存在只需要遍历一次而非多次遍历就可以生成后缀表达式的方法?</p> <p>实际上是存在的. 不过这基本上属于语法解析板块了, 这里的描述性证明(说明)和程序放在附录部分供有兴趣的同学参考: <a href=https://docs.hollowlib.top/algorithm/DBAA/appendix2/#f2-4>https://docs.hollowlib.top/algorithm/DBAA/appendix2/#f2-4</a>.</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p><em>C++算法编程指南 0.1 文档</em> <a href=https://majorli.github.io/algo_guide/ch03/sec01/318_linkedlist_2.html>https://majorli.github.io/algo_guide/ch03/sec01/318_linkedlist_2.html</a>&nbsp;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">↩</a></p> </li> <li id=fn:2> <p><em>Data Structures and Algorithm Analysis in C, Second Edition 3. 2. 7</em> P54&nbsp;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">↩</a></p> </li> <li id=fn:3> <p><em>A Fast Radix Sort, I.J.DAVIS, Department of Computing and Physics, Wilfrid Laurier University, Waterloo, Ontario, Canada N2L</em> Table 2 <a href=https://cs.uwaterloo.ca/~ijdavis/fastsort.pdf>https://cs.uwaterloo.ca/~ijdavis/fastsort.pdf</a>&nbsp;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">↩</a></p> </li> <li id=fn:4> <p><em>Fast Sort on CPUs, GPUs and Intel MIC Architectures, Nadathur Satish, Changkyu Kim, Jatin Chhugani, Anthony D. Nguyen, Victor W. Lee, Daehyun Kim, Pradeep Dubey Throughput Computing Lab.</em> <a href=https://www.intel.com/content/dam/www/public/us/en/documents/technology-briefs/intel-labs-radix-sort-mic-report.pdf>https://www.intel.com/content/dam/www/public/us/en/documents/technology-briefs/intel-labs-radix-sort-mic-report.pdf</a>&nbsp;<a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">↩</a></p> </li> <li id=fn:5> <p><em>Data Structures and Algorithm Analysis in C, Second Edition 3. 2. 7</em> P53&nbsp;<a class=footnote-backref href=#fnref:5 title="Jump back to footnote 5 in the text">↩</a></p> </li> <li id=fn:6> <p><em>Data Structures and Algorithm Analysis in C, Second Edition 3. 2. 7</em> P55&nbsp;<a class=footnote-backref href=#fnref:6 title="Jump back to footnote 6 in the text">↩</a></p> </li> <li id=fn:7> <p><em>Data Structures and Algorithm Analysis in C, Second Edition 3. 3. 3</em> P70&nbsp;<a class=footnote-backref href=#fnref:7 title="Jump back to footnote 7 in the text">↩</a></p> </li> <li id=fn:8> <p><em>Data Structures and Algorithm Analysis in C, Second Edition 3. 3. 3</em> P71&nbsp;<a class=footnote-backref href=#fnref:8 title="Jump back to footnote 8 in the text">↩</a></p> </li> </ol> </div> <h2 id=__comments>评论</h2> <script src=https://giscus.app/client.js data-repo=HollowDobt/docs-site data-repo-id=R_kgDOOvKsgw data-category=Comments data-category-id=DIC_kwDOOvKsg84CqrwA data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=https://docs.hollowlib.top/_css/comments.css data-lang=zh-CN data-loading=lazy crossorigin=anonymous async>
  </script> <script>
    var giscus = document.querySelector("script[src*=giscus]");
    var palette = __md_get("__palette");
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "transparent_dark" : "light";
      giscus.setAttribute("data-theme", theme);
    }

    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]");
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette");
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "transparent_dark" : "light";
          var frame = document.querySelector(".giscus-frame");
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          );
        }
      });
    });
  </script> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright style="margin-left: 33.5%; font-size: 0.87em;"> <div class=md-copyright__highlight style="text-align: center"> <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank class=license-link>Copyright © 2025 - 2026 Hollow Dobt</a> &nbsp; <a href="https://icp.gov.moe/?keyword=20257760" target=_blank>萌ICP备20257760号</a> </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.top", "navigation.tabs", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.instant", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.tooltips", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view", "content.social", "toc.follow"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../../../_js/math.js></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@4.1.0/tex-mml-chtml.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>